{"ast":null,"code":"import _defineProperty from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\src\\\\components\\\\Tavern\\\\Tavern.jsx\";\n\nimport { ethers } from 'ethers';\nimport React, { useEffect, useState } from \"react\";\nimport { getSkullsData, toTavern, toMission, sendNotification, getStakingData, approveStories, refreshSkullsStories } from \"../../redux/data/dataActions\";\nimport store from \"../../redux/store\";\nimport { useDispatch } from \"react-redux\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faDungeon, faRunning, faCoins, faSkullCrossbones, faSpinner, faRedoAlt } from '@fortawesome/free-solid-svg-icons';\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport ReactQuill from \"react-quill\";\nimport IpfsHttpClient from \"ipfs-http-client\";\nimport hexagon from \"./hexagon.svg\";\nimport inventoryIcon from \"./inventory.svg\";\nimport eggImage from './egg.png';\nimport bluePotionImage from './bluePotionImage.png';\nimport redPotionImage from './redPotionImage.png';\nimport \"react-quill/dist/quill.snow.css\";\nimport './tavern.css';\nvar ipfsUri480 = \"https://croskull.mypinata.cloud/ipfs/QmWu9bKunKbv8Kkq8wEWGpCaW47oMBbH6ep4ZWBzAxHtgj/\";\nvar ipfsUri128 = \"https://croskull.mypinata.cloud/ipfs/QmZn1HvYE1o1J8LhNpxFTj5k8LQb2bWT49YvbrhB3r19Xx/\";\n\nvar Tavern = function Tavern() {\n  var dispatch = useDispatch();\n\n  var _store$getState = store.getState(),\n      blockchain = _store$getState.blockchain,\n      data = _store$getState.data;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      viewStories = _useState2[0],\n      toggleStories = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewInventory = _useState4[0],\n      toggleInventory = _useState4[1];\n\n  var _useState5 = useState({\n    currentView: 'tavern',\n    //tavern or adventure\n    selectedSkulls: [],\n    selectedStakeSkulls: []\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      viewState = _useState6[0],\n      setViewState = _useState6[1];\n\n  var _useState7 = useState({\n    display: false,\n    tokenId: 0,\n    title: \"\",\n    description: \"\",\n    birthDate: 0,\n    deathDate: 0,\n    hobby: \"\",\n    twitter: \"\",\n    faction: \"\",\n    ownerOf: \"\",\n    x: 0,\n    y: 0\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      storyState = _useState8[0],\n      setStoryState = _useState8[1];\n\n  var _useState9 = useState({\n    display: false,\n    tokenId: 0,\n    title: \"\",\n    description: \"\",\n    birthDate: 0,\n    deathDate: 0,\n    hobby: \"\",\n    twitter: \"\",\n    faction: \"\"\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      editorStory = _useState10[0],\n      setEditorStory = _useState10[1];\n\n  var _useState11 = useState({\n    x: 0,\n    y: 0\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      mousePos = _useState12[0],\n      setMousePos = _useState12[1];\n\n  var _useState13 = useState({\n    display: false,\n    tokenId: 0\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      searchState = _useState14[0],\n      setSearchState = _useState14[1];\n\n  useEffect(function () {\n    if (viewStories) toggleStories(false);\n    if (viewInventory) toggleInventory(false);\n  }, [viewState]);\n  useEffect(function () {\n    if (viewInventory && viewStories) toggleInventory(false);\n  }, [viewStories]);\n  useEffect(function () {\n    if (viewStories && viewInventory) toggleStories(false);\n  }, [viewInventory]);\n  useEffect(function () {\n    setEditorStory(_objectSpread({}, editorStory, {\n      tokenId: storyState.tokenId\n    }));\n  }, [storyState.tokenId]);\n\n  var fetchSkullDescription = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n      var tokenId, ownerOf, croSkullsDescription, accountAddress, ipfsHash, hashMetadata, _yield$hashMetadata$j, _name, _description, _birthDate, _deathDate, _hobby, _twitter, _faction;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              tokenId = _ref.tokenId, ownerOf = _ref.ownerOf;\n              croSkullsDescription = blockchain.croSkullsDescription, accountAddress = blockchain.accountAddress;\n              _context.next = 4;\n              return croSkullsDescription.descriptionHashes(tokenId);\n\n            case 4:\n              ipfsHash = _context.sent;\n              ipfsHash = ipfsHash.toString();\n\n              if (!ipfsHash) {\n                _context.next = 25;\n                break;\n              }\n\n              ipfsHash = ipfsHash.replace('ipfs://', 'https://ipfs.infura.io/ipfs/');\n              _context.next = 10;\n              return fetch(ipfsHash);\n\n            case 10:\n              hashMetadata = _context.sent;\n              _context.next = 13;\n              return hashMetadata.json();\n\n            case 13:\n              _yield$hashMetadata$j = _context.sent;\n              _name = _yield$hashMetadata$j.name;\n              _description = _yield$hashMetadata$j.description;\n              _birthDate = _yield$hashMetadata$j.birthDate;\n              _deathDate = _yield$hashMetadata$j.deathDate;\n              _hobby = _yield$hashMetadata$j.hobby;\n              _twitter = _yield$hashMetadata$j.twitter;\n              _faction = _yield$hashMetadata$j.faction;\n              setStoryState(_objectSpread({}, storyState, {\n                name: _name,\n                description: _description,\n                birthDate: _birthDate,\n                deathDate: _deathDate,\n                hobby: _hobby,\n                twitter: _twitter,\n                faction: _faction,\n                display: true,\n                tokenId: tokenId,\n                ownerOf: ownerOf ? ownerOf : storyState.ownerOf,\n                x: mousePos.x,\n                y: mousePos.y\n              }));\n              setEditorStory(_objectSpread({}, editorStory, {\n                name: _name,\n                description: _description,\n                birthDate: _birthDate,\n                deathDate: _deathDate,\n                hobby: _hobby,\n                twitter: _twitter,\n                faction: _faction,\n                display: false,\n                tokenId: tokenId,\n                ownerOf: ownerOf ? ownerOf : storyState.ownerOf\n              }));\n              _context.next = 26;\n              break;\n\n            case 25:\n              setStoryState({\n                tokenId: tokenId,\n                ownerOf: ownerOf ? ownerOf : accountAddress,\n                display: true\n              });\n\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchSkullDescription(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var saveSkullStory = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var croSkullsDescription, storyfied, descriptionBuffer, client, ipfsResponse, path, skullStoryTx;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              croSkullsDescription = blockchain.croSkullsDescription;\n              storyfied = JSON.stringify(editorStory);\n              descriptionBuffer = Buffer.from(storyfied);\n              _context3.prev = 3;\n              client = IpfsHttpClient(new URL('https://ipfs.infura.io:5001/api/v0'));\n              _context3.next = 7;\n              return client.add(descriptionBuffer);\n\n            case 7:\n              ipfsResponse = _context3.sent;\n\n              if (!(ipfsResponse.path !== \"\")) {\n                _context3.next = 13;\n                break;\n              }\n\n              path = \"ipfs://\".concat(ipfsResponse.path);\n              skullStoryTx = croSkullsDescription.updateUsingGrave(editorStory.tokenId.toString(), //tokenId\n              path // ipfs string hash with prefix\n              );\n              _context3.next = 13;\n              return skullStoryTx.then( /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tx) {\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          console.log(tx);\n                          dispatch(sendNotification({\n                            title: \"Transaction Sent\",\n                            message: 'Waiting for confirmation...',\n                            tx: tx,\n                            type: \"info\"\n                          }));\n                          _context2.next = 4;\n                          return tx.wait(2);\n\n                        case 4:\n                          dispatch(sendNotification({\n                            title: \"Story Updated!\",\n                            message: \"Skull #\".concat(editorStory.tokenId, \"'s story updated succesful\"),\n                            tx: tx,\n                            type: \"success\"\n                          }));\n                          fetchSkullDescription({\n                            tokenId: editorStory.tokenId\n                          });\n                          setEditorStory(_objectSpread({}, editorStory, {\n                            display: false\n                          }));\n                          dispatch(getSkullsData());\n\n                        case 8:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x2) {\n                  return _ref4.apply(this, arguments);\n                };\n              }());\n\n            case 13:\n              _context3.next = 18;\n              break;\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](3);\n              console.log(_context3.t0.message);\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[3, 15]]);\n    }));\n\n    return function saveSkullStory() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var setApprovalforAll = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var croSkullsStaking, croSkullsContract, approvalTx;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              croSkullsStaking = blockchain.croSkullsStaking, croSkullsContract = blockchain.croSkullsContract;\n              approvalTx = croSkullsContract.setApprovalForAll(croSkullsStaking.address, true);\n              _context5.next = 4;\n              return approvalTx.then( /*#__PURE__*/function () {\n                var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(tx) {\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          console.log(tx);\n                          dispatch(sendNotification({\n                            title: \"Transaction Sent\",\n                            message: 'Waiting for confirmation...',\n                            tx: tx,\n                            type: \"default\"\n                          }));\n                          _context4.next = 4;\n                          return tx.wait(2);\n\n                        case 4:\n                          dispatch(sendNotification({\n                            title: \"Approved!\",\n                            message: \"Approved Succesful\",\n                            tx: tx,\n                            type: \"success\"\n                          }));\n                          dispatch(getStakingData());\n\n                        case 6:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function (_x3) {\n                  return _ref6.apply(this, arguments);\n                };\n              }());\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function setApprovalforAll() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var selectSkull = function selectSkull(e) {\n    var selectedSkulls = viewState.selectedSkulls;\n\n    if (selectedSkulls && selectedSkulls.includes(e)) {\n      for (var i = 0; i < selectedSkulls.length; i++) {\n        if (selectedSkulls[i] === e) {\n          selectedSkulls.splice(i, 1);\n        }\n      }\n    } else {\n      selectedSkulls.push(e);\n    }\n\n    setViewState(_objectSpread({}, viewState, {\n      selectedSkulls: selectedSkulls\n    }));\n  };\n\n  var selectStakedSkull = function selectStakedSkull(e) {\n    var selectedStakeSkulls = viewState.selectedStakeSkulls;\n\n    if (selectedStakeSkulls && selectedStakeSkulls.includes(e)) {\n      for (var i = 0; i < selectedStakeSkulls.length; i++) {\n        if (selectedStakeSkulls[i] === e) {\n          selectedStakeSkulls.splice(i, 1);\n        }\n      }\n    } else {\n      selectedStakeSkulls.push(e);\n    }\n\n    setViewState(_objectSpread({}, viewState, {\n      selectedStakeSkulls: selectedStakeSkulls\n    }));\n  };\n\n  var handleFieldChange = function handleFieldChange(event) {\n    var value = event.target ? event.target.value.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\") : event;\n    var name = event.target ? event.target.id : \"description\";\n    var type = event.target ? event.target.type : \"description\";\n    console.log(value, name, type);\n\n    if (type === 'date') {\n      value = parseInt(new Date(value).getTime() / 1000);\n    }\n\n    setEditorStory(_objectSpread({}, editorStory, _defineProperty({}, name, value)));\n  };\n\n  var searched = function searched(tokenId) {\n    setSearchState({\n      display: true,\n      tokenId: tokenId\n    });\n  }; //quill description editor setting\n\n\n  var storiesLoading = data.storiesLoading,\n      redCount = data.redCount,\n      blueCount = data.blueCount,\n      croSkullsStaked = data.croSkullsStaked,\n      croSkulls = data.croSkulls,\n      skullsStories = data.skullsStories,\n      approval = data.approval,\n      advancedMetadata = data.advancedMetadata,\n      loading = data.loading,\n      croSkullsContractOwner = data.croSkullsContractOwner,\n      petEggsMintedByUser = data.petEggsMintedByUser,\n      storyAllowance = data.storyAllowance;\n  var accountAddress = blockchain.accountAddress,\n      contractDetected = blockchain.contractDetected;\n  var tokenId = storyState.tokenId,\n      name = storyState.name,\n      description = storyState.description,\n      birthDate = storyState.birthDate,\n      deathDate = storyState.deathDate,\n      hobby = storyState.hobby,\n      twitter = storyState.twitter,\n      faction = storyState.faction,\n      display = storyState.display;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-flex sk-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-container wd-100\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box stories \".concat(viewStories ? 'show' : ''),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"stories-heading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }\n  }, \"Recent Community Stories\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      searched({\n        tokenId: tokenId\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 19\n    }\n  }, \"Prova\")), searchState.display ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box-content sk-row of-y-over\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"story-item\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-image-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundImage: \"url(\".concat(ipfsUri128).concat(searchState.tokenId, \".webp)\")\n    },\n    className: \"item-image\",\n    onClick: function onClick() {\n      fetchSkullDescription({\n        tokenId: tokenId\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"floating-badge\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"token-id\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }\n  }, tokenId))))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box-content sk-row of-y-over\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 17\n    }\n  }, skullsStories.length > 0 ? skullsStories.map(function (story, i) {\n    var ownerOf = story.ownerOf,\n        tokenId = story.tokenId;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"story-item\",\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item-image-container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundImage: \"url(\".concat(ipfsUri128).concat(tokenId, \".webp)\")\n      },\n      className: \"item-image\",\n      onClick: function onClick() {\n        fetchSkullDescription({\n          tokenId: tokenId,\n          ownerOf: ownerOf\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"floating-badge\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"token-id\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 31\n      }\n    }, tokenId))), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"story-owner\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 27\n      }\n    }, \"\".concat(story.ownerOf.substr(0, 4), \"...\").concat(story.ownerOf.substr(39, 41))));\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 23\n    }\n  }, \"Loading amazing stories...\"), storiesLoading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faSpinner,\n    className: \"story-icon loading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 27\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faRedoAlt,\n    className: \"story-icon\",\n    onClick: function onClick() {\n      dispatch(refreshSkullsStories());\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 27\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box inventory \".concat(viewInventory ? 'show' : ''),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"stories-heading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 13\n    }\n  }, \"Inventory\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box-content sk-row of-y-over\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-image-container\",\n    style: {\n      width: \"85px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundImage: \"url(\".concat(eggImage, \")\")\n    },\n    className: \"item-image \".concat(!petEggsMintedByUser ? 'disabled' : ''),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"item-count\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 19\n    }\n  }, petEggsMintedByUser))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-image-container\",\n    style: {\n      width: \"85px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundImage: \"url(\".concat(bluePotionImage, \")\")\n    },\n    className: \"item-image \".concat(!blueCount ? 'disabled' : ''),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"item-count\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 19\n    }\n  }, \"\".concat(blueCount)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item-image-container\",\n    style: {\n      width: \"85px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundImage: \"url(\".concat(redPotionImage, \")\")\n    },\n    className: \"item-image \".concat(!redCount ? 'disabled' : ''),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"item-count\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 19\n    }\n  }, \"\".concat(redCount)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tab-head\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"sk-row view-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"icon-menu \".concat(viewStories ? 'active' : ''),\n    onClick: function onClick() {\n      toggleStories(!viewStories);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"btn-toggle-stories\",\n    icon: faSkullCrossbones,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"icon-menu inventory-menu \".concat(viewInventory ? \"active\" : \"\"),\n    onClick: function onClick() {\n      toggleInventory(!viewInventory);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: inventoryIcon,\n    className: \"svg-icon btn-toggle-stories\",\n    alt: \"Inventory\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"skull-button view-button \".concat(viewState.currentView === 'tavern' ? 'active' : ''),\n    onClick: function onClick() {\n      setViewState(_objectSpread({}, viewState, {\n        currentView: 'tavern'\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 17\n    }\n  }, croSkulls.length > 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"floating-counter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 23\n    }\n  }, croSkulls.length) : '', \"Relaxing\"), approval ? /*#__PURE__*/React.createElement(\"li\", {\n    className: \"skull-button view-button \".concat(viewState.currentView === 'adventure' ? 'active' : ''),\n    onClick: function onClick() {\n      setViewState(_objectSpread({}, viewState, {\n        currentView: 'adventure'\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 21\n    }\n  }, croSkullsStaked.length > 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"floating-counter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 27\n    }\n  }, croSkullsStaked.length) : '', \"Adventure\") : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button view-button \".concat(blockchain.accountAddress ? 'approve' : 'disabled'),\n    disabled: blockchain.accountAddress ? false : true,\n    onClick: function onClick() {\n      setApprovalforAll();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 21\n    }\n  }, \"Approve\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box-content sk-column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"skulls-list in-tavern \".concat(viewState.currentView === 'tavern' ? \"active\" : \"\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-head\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"div-button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 19\n    }\n  }, croSkulls.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button btn-success\",\n    onClick: function onClick() {\n      return dispatch(toMission(croSkulls));\n    },\n    disabled: approval ? false : true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 29\n    }\n  }, \"Send All (\", croSkulls.length, \")\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button btn-success\",\n    hidden: viewState.selectedSkulls.length > 0 ? false : true,\n    onClick: function onClick() {\n      return dispatch(toMission(viewState.selectedSkulls));\n    },\n    disabled: approval ? false : true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 29\n    }\n  }, \"Send Selected in Mission \", viewState.selectedSkulls.length)) : '')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-row skull-grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 17\n    }\n  }, croSkulls.length > 0 ? croSkulls.map(function (cr, index) {\n    var data = advancedMetadata[cr - 1];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: cr,\n      className: \"skull-item\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: viewState.selectedSkulls.includes(cr) ? 'selected card' : 'card',\n      onClick: function onClick() {\n        return selectSkull(cr);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(LazyLoadImage, {\n      src: \"\".concat(ipfsUri480).concat(cr, \".webp\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"floating-badges-container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"badge id\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 33\n      }\n    }, cr), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"badge rank\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 33\n      }\n    }, \"Rank \", data ? data.rank : ''), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"badge rank\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 33\n      }\n    }, \"Rarity \", data ? String(data.rarityPercent).substr(0, 3) : '', \"%\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bottom-actions\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button mission-button\",\n      onClick: function onClick() {\n        dispatch(toMission(cr));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faDungeon,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 35\n      }\n    }), \"Mission\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button sell-button\",\n      onClick: function onClick() {\n        window.open(\"https://app.ebisusbay.com/collection/croskull\").focus();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCoins,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 35\n      }\n    }), \"Sell\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button story-button\",\n      onClick: function onClick() {\n        fetchSkullDescription({\n          tokenId: cr,\n          ownerOf: accountAddress\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"hexagon\",\n      src: hexagon,\n      alt: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 35\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 35\n      }\n    }, \"Story\")))));\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-flex sk-column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 27\n    }\n  }, loading && !croSkullsContractOwner ? \"Loading...\" : !croSkullsContractOwner && !loading && croSkulls.length === 0 ? \"You don't have any skull...\" : \"You don't have any skull :c\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      window.open(\"https://app.ebisusbay.com/collection/croskull\").focus();\n    },\n    className: \"skull-button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 27\n    }\n  }, \"Buy Skull\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"skulls-list in-adventure \".concat(viewState.currentView === 'adventure' ? \"active\" : \"\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-head\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"div-button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 19\n    }\n  }, croSkullsStaked.length > 0 ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button retire-button\",\n    onClick: function onClick() {\n      return dispatch(toTavern(croSkullsStaked));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 27\n    }\n  }, \"Retire All (\", croSkullsStaked.length, \")\") : '', /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button retire-button\",\n    hidden: viewState.selectedStakeSkulls.length > 0 ? false : true,\n    onClick: function onClick() {\n      return dispatch(toTavern(viewState.selectedStakeSkulls));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 21\n    }\n  }, \"Retire Selected \", viewState.selectedStakeSkulls.length))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-row skull-grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 17\n    }\n  }, croSkullsStaked.length > 0 ? croSkullsStaked.map(function (cr, index) {\n    var data = advancedMetadata[cr - 1];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: cr,\n      className: \"skull-item\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: viewState.selectedStakeSkulls.includes(cr) ? 'selected card' : 'card',\n      onClick: function onClick() {\n        return selectStakedSkull(cr);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(LazyLoadImage, {\n      src: \"\".concat(ipfsUri480).concat(cr, \".webp\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"floating-badges-container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"badge id\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 33\n      }\n    }, cr), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"badge rank\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 33\n      }\n    }, \"Rank \", data ? data.rank : '')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bottom-actions\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button retire-button\",\n      onClick: function onClick(e) {\n        e.preventDefault();\n        dispatch(toTavern(cr));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faRunning,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 35\n      }\n    }), \"Retire\"))));\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 25\n    }\n  }, !croSkullsStaked.length && contractDetected ? \"There're no skulls in adventure, you're not Generating Grave\" : \"Loading...\"))))))), display ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"story-modal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 9\n    }\n  }, editorStory.display ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box container\",\n    style: {\n      left: \"\".concat(storyState.x, \"px\"),\n      top: \"\".concat(storyState.y, \"px\")\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(LazyLoadImage, {\n    src: \"\".concat(ipfsUri480).concat(tokenId, \".webp\"),\n    className: \"selected div-skull\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"birthDate\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 17\n    }\n  }, \"Birth date\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"birthDate\",\n    type: \"date\",\n    name: \"birthDate\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"deathDate\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 17\n    }\n  }, \"Death date\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"deathDate\",\n    type: \"date\",\n    name: \"deathDate\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"faction\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 17\n    }\n  }, \"Faction\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"faction\",\n    id: \"faction\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 690,\n      columnNumber: 19\n    }\n  }, \"None\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"lowlights\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 691,\n      columnNumber: 19\n    }\n  }, \"Lowlight\\u2019s\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"shadowrats\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 692,\n      columnNumber: 19\n    }\n  }, \"ShadowRats\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"acquafall\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 693,\n      columnNumber: 19\n    }\n  }, \"Acquafall\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"solarcry\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 19\n    }\n  }, \"Solarcry\")), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"twitter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 696,\n      columnNumber: 17\n    }\n  }, \"Twitter Handle ( with @ )\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"twitter\",\n    type: \"text\",\n    name: \"twitter\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"metadata\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 704,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close-icon\",\n    onClick: function onClick() {\n      setEditorStory(_objectSpread({}, editorStory, {\n        display: false\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 17\n    }\n  }, \"Back to Skull\"), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      fontSize: '18px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 17\n    }\n  }, \"Edit your Skull Details\"), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 17\n    }\n  }, \"Skull Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    type: \"text\",\n    name: \"name\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 718,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"hobby\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 17\n    }\n  }, \"Hobbies/Motto\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"hobby\",\n    type: \"text\",\n    name: \"hobby\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 17\n    }\n  }, \"Skull's Story\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'scroll'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 732,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ReactQuill, {\n    className: \"description-editor\",\n    modules: modules,\n    formats: formats,\n    value: editorStory.description,\n    onChange: handleFieldChange,\n    placeholder: \"Write something awesome...\",\n    name: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pay-action\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 17\n    }\n  }, storyAllowance > 0 ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button save-grave\",\n    onClick: function onClick() {\n      return saveSkullStory();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 750,\n      columnNumber: 23\n    }\n  }, \"Update using (10) Grave\") : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button save-grave\",\n    onClick: function onClick() {\n      return dispatch(approveStories());\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 23\n    }\n  }, \"Approve Story\")))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(LazyLoadImage, {\n    src: \"\".concat(ipfsUri480).concat(tokenId, \".webp\"),\n    className: \"card div-skull\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 775,\n      columnNumber: 17\n    }\n  }, \"Birth Date: \", birthDate > 0 ? new Date(birthDate * 1000).toISOString().slice(0, 10) : ''), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 776,\n      columnNumber: 17\n    }\n  }, \"Death Date: \", deathDate > 0 ? new Date(deathDate * 1000).toISOString().slice(0, 10) : ''), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 777,\n      columnNumber: 17\n    }\n  }, \"Faction: \", faction), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 778,\n      columnNumber: 17\n    }\n  }, \"Twitter: \", twitter !== '' ? /*#__PURE__*/React.createElement(\"a\", {\n    href: twitter ? \"https://twitter.com/\".concat(twitter.replace('@', '')) : '',\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 779,\n      columnNumber: 19\n    }\n  }, twitter) : ''), storyState.ownerOf && ethers.utils.getAddress(storyState.ownerOf) === ethers.utils.getAddress(accountAddress) ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button edit-button\",\n    onClick: function onClick() {\n      setEditorStory(_objectSpread({}, editorStory, {\n        display: true\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 783,\n      columnNumber: 21\n    }\n  }, \"Edit Story\") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 21\n    }\n  }, \"Owner: \", storyState.ownerOf ? \"\".concat(storyState.ownerOf.substr(0, 5), \"...\").concat(storyState.ownerOf.substr(38, 41)) : '')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"metadata\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close-icon\",\n    onClick: function onClick() {\n      setStoryState(_objectSpread({}, storyState, {\n        display: false\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 803,\n      columnNumber: 17\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 814,\n      columnNumber: 17\n    }\n  }, name), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 815,\n      columnNumber: 17\n    }\n  }, \"Hobby: \", hobby), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"description\",\n    dangerouslySetInnerHTML: {\n      __html: description\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 816,\n      columnNumber: 17\n    }\n  })))) : '');\n};\n\nvar modules = {\n  toolbar: [[{\n    'header': [1, 2, false]\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    'list': 'ordered'\n  }, {\n    'list': 'bullet'\n  }, {\n    'indent': '-1'\n  }, {\n    'indent': '+1'\n  }], ['clean']]\n};\nvar formats = ['header', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'indent'];\nexport default Tavern;","map":{"version":3,"sources":["F:/Mattia/Visual studio/AppCroskull/croskull-nft-marketplace/src/components/Tavern/Tavern.jsx"],"names":["ethers","React","useEffect","useState","getSkullsData","toTavern","toMission","sendNotification","getStakingData","approveStories","refreshSkullsStories","store","useDispatch","FontAwesomeIcon","faDungeon","faRunning","faCoins","faSkullCrossbones","faSpinner","faRedoAlt","LazyLoadImage","ReactQuill","IpfsHttpClient","eggImage","bluePotionImage","redPotionImage","ipfsUri480","ipfsUri128","Tavern","dispatch","getState","blockchain","data","viewStories","toggleStories","viewInventory","toggleInventory","currentView","selectedSkulls","selectedStakeSkulls","viewState","setViewState","display","tokenId","title","description","birthDate","deathDate","hobby","twitter","faction","ownerOf","x","y","storyState","setStoryState","editorStory","setEditorStory","mousePos","setMousePos","searchState","setSearchState","fetchSkullDescription","croSkullsDescription","accountAddress","descriptionHashes","ipfsHash","toString","replace","fetch","hashMetadata","json","name","saveSkullStory","storyfied","JSON","stringify","descriptionBuffer","Buffer","from","client","URL","add","ipfsResponse","path","skullStoryTx","updateUsingGrave","then","tx","console","log","message","type","wait","setApprovalforAll","croSkullsStaking","croSkullsContract","approvalTx","setApprovalForAll","address","selectSkull","e","includes","i","length","splice","push","selectStakedSkull","handleFieldChange","event","value","target","id","parseInt","Date","getTime","searched","storiesLoading","redCount","blueCount","croSkullsStaked","croSkulls","skullsStories","approval","advancedMetadata","loading","croSkullsContractOwner","petEggsMintedByUser","storyAllowance","contractDetected","backgroundImage","map","story","substr","width","inventoryIcon","cr","index","rank","String","rarityPercent","window","open","focus","hexagon","preventDefault","left","top","fontSize","overflowY","modules","formats","toISOString","slice","utils","getAddress","__html","toolbar"],"mappings":"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","sourcesContent":["import {\r\n  ethers\r\n} from 'ethers';\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { getSkullsData, toTavern, toMission, sendNotification, getStakingData, approveStories, refreshSkullsStories } from \"../../redux/data/dataActions\";\r\nimport store from \"../../redux/store\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faDungeon, faRunning, faCoins, faSkullCrossbones, faSpinner, faRedoAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport ReactQuill from \"react-quill\";\r\nimport IpfsHttpClient from \"ipfs-http-client\";\r\nimport hexagon from './hexagon.svg';\r\nimport inventoryIcon from './inventory.svg';\r\nimport eggImage from './egg.png';\r\nimport bluePotionImage from './bluePotionImage.png';\r\nimport redPotionImage from './redPotionImage.png';\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport './tavern.css';\r\n\r\nconst ipfsUri480 = \"https://croskull.mypinata.cloud/ipfs/QmWu9bKunKbv8Kkq8wEWGpCaW47oMBbH6ep4ZWBzAxHtgj/\"\r\nconst ipfsUri128 = \"https://croskull.mypinata.cloud/ipfs/QmZn1HvYE1o1J8LhNpxFTj5k8LQb2bWT49YvbrhB3r19Xx/\"\r\nconst Tavern = () => {\r\n  let dispatch = useDispatch()\r\n  let { blockchain, data } = store.getState()\r\n\r\n  const [viewStories, toggleStories] = useState(false)\r\n  const [viewInventory, toggleInventory] = useState(false)\r\n\r\n  const [viewState, setViewState] = useState({\r\n    currentView: 'tavern', //tavern or adventure\r\n    selectedSkulls: [],\r\n    selectedStakeSkulls: []\r\n  })\r\n\r\n  const [storyState, setStoryState] = useState({\r\n    display: false,\r\n    tokenId: 0,\r\n    title: \"\",\r\n    description: \"\",\r\n    birthDate: 0,\r\n    deathDate: 0,\r\n    hobby: \"\",\r\n    twitter: \"\",\r\n    faction: \"\",\r\n    ownerOf: \"\",\r\n    x: 0,\r\n    y: 0\r\n  })\r\n\r\n  const [editorStory, setEditorStory] = useState({\r\n    display: false,\r\n    tokenId: 0,\r\n    title: \"\",\r\n    description: \"\",\r\n    birthDate: 0,\r\n    deathDate: 0,\r\n    hobby: \"\",\r\n    twitter: \"\",\r\n    faction: \"\"\r\n  })\r\n\r\n  const [mousePos, setMousePos] = useState({\r\n    x: 0,\r\n    y: 0\r\n  })\r\n\r\n  const [searchState, setSearchState] = useState({\r\n    display: false,\r\n    tokenId: 0\r\n  })\r\n\r\n\r\n  useEffect(() => {\r\n    if (viewStories)\r\n      toggleStories(false)\r\n    if (viewInventory)\r\n      toggleInventory(false)\r\n  }, [viewState])\r\n\r\n  useEffect(() => {\r\n    if (viewInventory && viewStories)\r\n      toggleInventory(false)\r\n  }, [viewStories])\r\n\r\n  useEffect(() => {\r\n    if (viewStories && viewInventory)\r\n      toggleStories(false)\r\n  }, [viewInventory])\r\n\r\n  useEffect(() => {\r\n    setEditorStory({\r\n      ...editorStory,\r\n      tokenId: storyState.tokenId\r\n    })\r\n  }, [storyState.tokenId])\r\n\r\n  const fetchSkullDescription = async ({ tokenId, ownerOf }) => {\r\n    let { croSkullsDescription, accountAddress } = blockchain\r\n    let ipfsHash = await croSkullsDescription.descriptionHashes(tokenId)\r\n    ipfsHash = ipfsHash.toString()\r\n    if (ipfsHash) {\r\n      ipfsHash = ipfsHash.replace('ipfs://', 'https://ipfs.infura.io/ipfs/')\r\n      let hashMetadata = await fetch(ipfsHash);\r\n      let { name, description, birthDate, deathDate, hobby, twitter, faction } = await hashMetadata.json();\r\n      setStoryState({\r\n        ...storyState,\r\n        name,\r\n        description,\r\n        birthDate,\r\n        deathDate,\r\n        hobby,\r\n        twitter,\r\n        faction,\r\n        display: true,\r\n        tokenId,\r\n        ownerOf: ownerOf ? ownerOf : storyState.ownerOf,\r\n        x: mousePos.x,\r\n        y: mousePos.y\r\n      })\r\n      setEditorStory({\r\n        ...editorStory,\r\n        name,\r\n        description,\r\n        birthDate,\r\n        deathDate,\r\n        hobby,\r\n        twitter,\r\n        faction,\r\n        display: false,\r\n        tokenId,\r\n        ownerOf: ownerOf ? ownerOf : storyState.ownerOf,\r\n      })\r\n    } else {\r\n      setStoryState({\r\n        tokenId,\r\n        ownerOf: ownerOf ? ownerOf : accountAddress,\r\n        display: true\r\n      })\r\n    }\r\n  }\r\n\r\n  const saveSkullStory = async () => {\r\n    let { croSkullsDescription } = blockchain\r\n    let storyfied = JSON.stringify(editorStory)\r\n    let descriptionBuffer = Buffer.from(storyfied)\r\n    try {\r\n      const client = IpfsHttpClient(new URL('https://ipfs.infura.io:5001/api/v0'));\r\n      const ipfsResponse = await client.add(descriptionBuffer);\r\n      if (ipfsResponse.path !== \"\") {\r\n        let path = `ipfs://${ipfsResponse.path}`\r\n        let skullStoryTx = croSkullsDescription.updateUsingGrave(\r\n          editorStory.tokenId.toString(), //tokenId\r\n          path, // ipfs string hash with prefix\r\n        )\r\n\r\n        await skullStoryTx.then(\r\n          async (tx) => {\r\n            console.log(tx)\r\n            dispatch(sendNotification({\r\n              title: `Transaction Sent`,\r\n              message: 'Waiting for confirmation...',\r\n              tx,\r\n              type: \"info\"\r\n            }))\r\n            await tx.wait(2)\r\n            dispatch(sendNotification({\r\n              title: `Story Updated!`,\r\n              message: `Skull #${editorStory.tokenId}'s story updated succesful`,\r\n              tx,\r\n              type: \"success\"\r\n            }))\r\n            fetchSkullDescription({ tokenId: editorStory.tokenId })\r\n            setEditorStory({\r\n              ...editorStory,\r\n              display: false\r\n            })\r\n            dispatch(getSkullsData())\r\n          }\r\n        )\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n\r\n  const setApprovalforAll = async () => {\r\n    let { croSkullsStaking, croSkullsContract } = blockchain\r\n    let approvalTx = croSkullsContract.setApprovalForAll(\r\n      croSkullsStaking.address,\r\n      true\r\n    )\r\n    await approvalTx.then(async (tx) => {\r\n      console.log(tx)\r\n      dispatch(sendNotification({\r\n        title: `Transaction Sent`,\r\n        message: 'Waiting for confirmation...',\r\n        tx,\r\n        type: \"default\"\r\n      }))\r\n      await tx.wait(2)\r\n      dispatch(sendNotification({\r\n        title: `Approved!`,\r\n        message: `Approved Succesful`,\r\n        tx,\r\n        type: \"success\"\r\n      }))\r\n      dispatch(getStakingData())\r\n    })\r\n  }\r\n\r\n  const selectSkull = (e) => {\r\n    let { selectedSkulls } = viewState;\r\n    if (selectedSkulls && selectedSkulls.includes(e)) {\r\n      for (let i = 0; i < selectedSkulls.length; i++) {\r\n        if (selectedSkulls[i] === e) {\r\n          selectedSkulls.splice(i, 1);\r\n        }\r\n      }\r\n    } else {\r\n      selectedSkulls.push(e);\r\n    }\r\n    setViewState({\r\n      ...viewState,\r\n      selectedSkulls\r\n    })\r\n  }\r\n\r\n  const selectStakedSkull = (e) => {\r\n    let { selectedStakeSkulls } = viewState;\r\n    if (selectedStakeSkulls && selectedStakeSkulls.includes(e)) {\r\n      for (let i = 0; i < selectedStakeSkulls.length; i++) {\r\n        if (selectedStakeSkulls[i] === e) {\r\n          selectedStakeSkulls.splice(i, 1);\r\n        }\r\n      }\r\n    } else {\r\n      selectedStakeSkulls.push(e);\r\n    }\r\n    setViewState({\r\n      ...viewState,\r\n      selectedStakeSkulls\r\n    })\r\n  }\r\n\r\n  const handleFieldChange = (event) => {\r\n    let value = event.target ? event.target.value.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\") : event\r\n    let name = event.target ? event.target.id : \"description\"\r\n    let type = event.target ? event.target.type : \"description\"\r\n    console.log(value, name, type)\r\n    if (type === 'date') {\r\n      value = parseInt(new Date(value).getTime() / 1000)\r\n    }\r\n    setEditorStory({\r\n      ...editorStory,\r\n      [name]: value\r\n    })\r\n  }\r\n\r\n  const searched = (tokenId) => {\r\n    setSearchState({\r\n      display:true,\r\n      tokenId: tokenId\r\n    })\r\n  }\r\n\r\n  //quill description editor setting\r\n\r\n  let { storiesLoading, redCount, blueCount, croSkullsStaked, croSkulls, skullsStories, approval, advancedMetadata, loading, croSkullsContractOwner, petEggsMintedByUser, storyAllowance } = data;\r\n  let { accountAddress, contractDetected } = blockchain\r\n  let {\r\n    tokenId,\r\n    name,\r\n    description,\r\n    birthDate,\r\n    deathDate,\r\n    hobby,\r\n    twitter,\r\n    faction,\r\n    display\r\n  } = storyState\r\n  return (\r\n    <>\r\n      <div className=\"sk-flex sk-row\">\r\n        <div className=\"sk-container wd-100\">\r\n          <div className={`sk-box stories ${viewStories ? 'show' : ''}`}>\r\n            <span className=\"stories-heading\">Recent Community Stories</span>\r\n            <span><button\r\n            onClick={() => {\r\n              searched({ tokenId })\r\n            }}>Prova</button></span>\r\n            {\r\n              searchState.display ?\r\n                <div className=\"sk-box-content sk-row of-y-over\">\r\n\r\n                  <div className=\"story-item\">\r\n                    <div className=\"item-image-container\">\r\n                      <div\r\n                        style={{ backgroundImage: `url(${ipfsUri128}${searchState.tokenId}.webp)` }}\r\n                        className=\"item-image\"\r\n                        onClick={() => {\r\n                          fetchSkullDescription({ tokenId })\r\n                        }}\r\n                      />\r\n                      <div\r\n                        className=\"floating-badge\"\r\n                      >\r\n                        <span className=\"token-id\">\r\n                          {tokenId}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                :\r\n                <div className=\"sk-box-content sk-row of-y-over\">\r\n                  {skullsStories.length > 0 ?\r\n                    skullsStories.map((story, i) => {\r\n                      let { ownerOf, tokenId } = story\r\n                      return (\r\n                        <div className=\"story-item\" key={i}>\r\n                          <div className=\"item-image-container\">\r\n                            <div\r\n                              style={{ backgroundImage: `url(${ipfsUri128}${tokenId}.webp)` }}\r\n                              className=\"item-image\"\r\n                              onClick={() => {\r\n                                fetchSkullDescription({ tokenId, ownerOf })\r\n                              }}\r\n                            />\r\n                            <div\r\n                              className=\"floating-badge\"\r\n                            >\r\n                              <span className=\"token-id\">\r\n                                {tokenId}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          <span\r\n                            className=\"story-owner\"\r\n                          >\r\n                            {`${story.ownerOf.substr(0, 4)}...${story.ownerOf.substr(39, 41)}`}\r\n                          </span>\r\n                        </div>\r\n                      )\r\n                    }) : (\r\n                      <span>Loading amazing stories...</span>\r\n                    )\r\n                  }\r\n                  {\r\n                    storiesLoading ?\r\n                      (\r\n                        <>\r\n                          <FontAwesomeIcon\r\n                            icon={faSpinner}\r\n                            className=\"story-icon loading\"\r\n                          ></FontAwesomeIcon>\r\n                        </>\r\n\r\n                      ) : (\r\n                        <>\r\n                          <FontAwesomeIcon\r\n                            icon={faRedoAlt}\r\n                            className=\"story-icon\"\r\n                            onClick={() => {\r\n                              dispatch(\r\n                                refreshSkullsStories()\r\n                              )\r\n                            }}\r\n                          ></FontAwesomeIcon>\r\n                        </>\r\n                      )\r\n                  }\r\n                </div>\r\n\r\n            }\r\n\r\n          </div>\r\n          <div className={`sk-box inventory ${viewInventory ? 'show' : ''}`}>\r\n            <span className=\"stories-heading\">Inventory</span>\r\n            <div className=\"sk-box-content sk-row of-y-over\">\r\n              <div\r\n                className=\"item-image-container\"\r\n                style={{ width: `85px` }}\r\n              >\r\n                <div\r\n                  style={{ backgroundImage: `url(${eggImage})` }}\r\n                  className={`item-image ${!petEggsMintedByUser ? 'disabled' : ''}`}\r\n                >\r\n                  <span className=\"item-count\">{petEggsMintedByUser}</span>\r\n                </div>\r\n              </div>\r\n              <div\r\n                className=\"item-image-container\"\r\n                style={{ width: `85px` }}\r\n              >\r\n                <div\r\n                  style={{ backgroundImage: `url(${bluePotionImage})` }}\r\n                  className={`item-image ${!blueCount ? 'disabled' : ''}`}\r\n                >\r\n                  <span className=\"item-count\">{`${blueCount}`}</span>\r\n                </div>\r\n              </div>\r\n              <div\r\n                className=\"item-image-container\"\r\n                style={{ width: `85px` }}\r\n              >\r\n                <div\r\n                  style={{ backgroundImage: `url(${redPotionImage})` }}\r\n                  className={`item-image ${!redCount ? 'disabled' : ''}`}\r\n                >\r\n                  <span className={\"item-count\"}>{`${redCount}`}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"sk-box\">\r\n            <div className=\"tab-head\">\r\n              <ul className=\"sk-row view-list\">\r\n                <li\r\n                  className={`icon-menu ${viewStories ? 'active' : ''}`}\r\n                  onClick={() => {\r\n                    toggleStories(!viewStories)\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    className=\"btn-toggle-stories\"\r\n                    icon={faSkullCrossbones}\r\n                  />\r\n                </li>\r\n                <li\r\n                  className={`icon-menu inventory-menu ${viewInventory ? `active` : ``}`}\r\n                  onClick={() => {\r\n                    toggleInventory(!viewInventory)\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={inventoryIcon}\r\n                    className=\"svg-icon btn-toggle-stories\"\r\n                    alt=\"Inventory\"\r\n                  />\r\n                </li>\r\n                <li className={`skull-button view-button ${viewState.currentView === 'tavern' ? 'active' : ''}`}\r\n                  onClick={() => {\r\n                    setViewState({\r\n                      ...viewState,\r\n                      currentView: 'tavern'\r\n                    })\r\n                  }}\r\n                >\r\n                  {\r\n                    croSkulls.length > 0 ? (\r\n                      <span className=\"floating-counter\">{croSkulls.length}</span>\r\n                    ) :\r\n                      ''\r\n                  }\r\n                  Relaxing\r\n                </li>\r\n                {\r\n                  approval ? (\r\n                    <li\r\n                      className={`skull-button view-button ${viewState.currentView === 'adventure' ? 'active' : ''}`}\r\n                      onClick={() => {\r\n                        setViewState({\r\n                          ...viewState,\r\n                          currentView: 'adventure'\r\n                        })\r\n                      }}\r\n                    >\r\n                      {\r\n                        croSkullsStaked.length > 0 ? (\r\n                          <span className=\"floating-counter\">{croSkullsStaked.length}</span>\r\n                        ) :\r\n                          ''\r\n                      }\r\n                      Adventure\r\n                    </li>\r\n                  ) : (\r\n                    <button\r\n                      className={`skull-button view-button ${blockchain.accountAddress ? 'approve' : 'disabled'}`}\r\n                      disabled={blockchain.accountAddress ? false : true}\r\n                      onClick={() => {\r\n                        setApprovalforAll()\r\n                      }}\r\n                    >\r\n                      Approve\r\n                    </button>\r\n                  )\r\n                }\r\n              </ul>\r\n            </div>\r\n            <div className=\"sk-box-content sk-column\">\r\n              <div className={`skulls-list in-tavern ${viewState.currentView === 'tavern' ? `active` : ``}`}>\r\n                <div className=\"list-head\">\r\n                  <div className=\"div-button\">\r\n                    {\r\n                      croSkulls.length > 0 ?\r\n                        (\r\n                          <>\r\n                            <button className=\"skull-button btn-success\"\r\n                              onClick={() => dispatch(toMission(croSkulls))}\r\n                              disabled={approval ? false : true}\r\n                            >\r\n                              Send All ({croSkulls.length})\r\n                            </button>\r\n                            <button\r\n                              className=\"skull-button btn-success\"\r\n                              hidden={(viewState.selectedSkulls.length > 0 ? false : true)}\r\n                              onClick={() => dispatch(toMission(viewState.selectedSkulls))}\r\n                              disabled={approval ? false : true}\r\n                            >\r\n                              Send Selected in Mission {viewState.selectedSkulls.length}\r\n                            </button>\r\n                          </>\r\n                        ) : ('')\r\n                    }\r\n                  </div>\r\n                </div>\r\n                <div className=\"sk-row skull-grid\">\r\n                  {\r\n                    croSkulls.length > 0 ?\r\n                      (croSkulls).map((cr, index) => {\r\n                        let data = advancedMetadata[cr - 1]\r\n                        return (\r\n                          <div key={cr} className=\"skull-item\" >\r\n                            <div\r\n                              className={viewState.selectedSkulls.includes(cr) ? 'selected card' : 'card'}\r\n                              onClick={() => selectSkull(cr)}\r\n                            >\r\n                              <LazyLoadImage\r\n                                src={`${ipfsUri480}${cr}.webp`}\r\n                              />\r\n                              <div className=\"floating-badges-container\">\r\n                                <span className=\"badge id\">{cr}</span>\r\n                                <span className=\"badge rank\">Rank {data ? data.rank : ''}</span>\r\n                                <span className=\"badge rank\">Rarity {data ? String(data.rarityPercent).substr(0, 3) : ''}%</span>\r\n                              </div>\r\n                              <div className=\"bottom-actions\">\r\n                                <button\r\n                                  className=\"skull-button mission-button\"\r\n                                  onClick={() => {\r\n                                    dispatch(toMission(cr))\r\n                                  }}\r\n                                >\r\n                                  <FontAwesomeIcon icon={faDungeon} />\r\n                                  Mission\r\n                                </button>\r\n                                <button\r\n                                  className=\"skull-button sell-button\"\r\n                                  onClick={() => {\r\n                                    window.open(\"https://app.ebisusbay.com/collection/croskull\").focus()\r\n                                  }}\r\n                                >\r\n                                  <FontAwesomeIcon icon={faCoins} />\r\n                                  Sell\r\n                                </button>\r\n                                <button\r\n                                  className=\"skull-button story-button\"\r\n                                  onClick={() => {\r\n                                    fetchSkullDescription({ tokenId: cr, ownerOf: accountAddress })\r\n                                  }}\r\n                                >\r\n                                  <img\r\n                                    className=\"hexagon\"\r\n                                    src={hexagon}\r\n                                    alt=\"\"\r\n                                  />\r\n                                  <span>Story</span>\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })\r\n                      : (\r\n                        <div className=\"sk-flex sk-column\">\r\n                          <span>{loading && !croSkullsContractOwner ? `Loading...` : !croSkullsContractOwner && !loading && croSkulls.length === 0 ? `You don't have any skull...` : `You don't have any skull :c`}</span>\r\n                          <button\r\n                            onClick={() => { window.open(\"https://app.ebisusbay.com/collection/croskull\").focus() }}\r\n                            className=\"skull-button\"\r\n                          >\r\n                            Buy Skull\r\n                          </button>\r\n                        </div>\r\n                      )\r\n                  }\r\n                </div>\r\n              </div>\r\n              <div className={`skulls-list in-adventure ${viewState.currentView === 'adventure' ? `active` : ``}`}>\r\n                <div className=\"list-head\">\r\n                  <div className=\"div-button\">\r\n                    {\r\n                      croSkullsStaked.length > 0 ?\r\n                        (\r\n                          <button className=\"skull-button retire-button\"\r\n                            onClick={() => dispatch(toTavern(croSkullsStaked))}\r\n                          >\r\n                            Retire All ({croSkullsStaked.length})\r\n                          </button>\r\n                        ) : ('')\r\n                    }\r\n                    <button\r\n                      className=\"skull-button retire-button\"\r\n                      hidden={(viewState.selectedStakeSkulls.length > 0 ? false : true)}\r\n                      onClick={() => dispatch(toTavern(viewState.selectedStakeSkulls))}\r\n                    >\r\n                      Retire Selected {viewState.selectedStakeSkulls.length}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"sk-row skull-grid\">\r\n                  {\r\n                    croSkullsStaked.length > 0 ?\r\n                      (croSkullsStaked).map((cr, index) => {\r\n                        let data = advancedMetadata[cr - 1]\r\n                        return (\r\n                          <div key={cr} className=\"skull-item\" >\r\n                            <div\r\n                              className={viewState.selectedStakeSkulls.includes(cr) ? 'selected card' : 'card'}\r\n                              onClick={() => selectStakedSkull(cr)}\r\n                            >\r\n                              <LazyLoadImage\r\n                                src={`${ipfsUri480}${cr}.webp`}\r\n                              />\r\n                              <div className=\"floating-badges-container\">\r\n                                <span className=\"badge id\">{cr}</span>\r\n                                <span className=\"badge rank\">Rank {data ? data.rank : ''}</span>\r\n                              </div>\r\n                              <div className=\"bottom-actions\">\r\n                                <button\r\n                                  className=\"skull-button retire-button\"\r\n                                  onClick={(e) => {\r\n                                    e.preventDefault()\r\n                                    dispatch(toTavern(cr))\r\n                                  }}\r\n                                >\r\n                                  <FontAwesomeIcon icon={faRunning} />\r\n                                  Retire\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        )\r\n                      })\r\n                      : (\r\n                        <span>\r\n                          {!croSkullsStaked.length && contractDetected ? `There're no skulls in adventure, you're not Generating Grave` : `Loading...`}\r\n                        </span>\r\n                      )\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {display ? (\r\n        <div className=\"story-modal\">\r\n          {editorStory.display ? (\r\n            <div\r\n              className=\"sk-box container\"\r\n              style={{ left: `${storyState.x}px`, top: `${storyState.y}px` }}\r\n            >\r\n              <div className=\"image\">\r\n                <LazyLoadImage\r\n                  src={`${ipfsUri480}${tokenId}.webp`}\r\n                  className='selected div-skull'\r\n                />\r\n                <label for=\"birthDate\">Birth date</label>\r\n                <input\r\n                  id=\"birthDate\"\r\n                  type=\"date\"\r\n                  name=\"birthDate\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label for=\"deathDate\">Death date</label>\r\n                <input\r\n                  id=\"deathDate\"\r\n                  type=\"date\"\r\n                  name=\"deathDate\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label for=\"faction\">Faction</label>\r\n                <select\r\n                  name=\"faction\"\r\n                  id=\"faction\"\r\n                  onChange={handleFieldChange}\r\n                >\r\n                  <option value=\"none\">None</option>\r\n                  <option value=\"lowlights\">Lowlights</option>\r\n                  <option value=\"shadowrats\">ShadowRats</option>\r\n                  <option value=\"acquafall\">Acquafall</option>\r\n                  <option value=\"solarcry\">Solarcry</option>\r\n                </select>\r\n                <label htmlFor=\"twitter\">Twitter Handle ( with @ )</label>\r\n                <input\r\n                  id=\"twitter\"\r\n                  type=\"text\"\r\n                  name=\"twitter\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n              </div>\r\n              <div className=\"metadata\">\r\n                <div\r\n                  className=\"close-icon\"\r\n                  onClick={() => {\r\n                    setEditorStory({\r\n                      ...editorStory,\r\n                      display: false\r\n                    })\r\n                  }}\r\n                >\r\n                  Back to Skull\r\n                </div>\r\n                <h2 style={{ fontSize: '18px' }}>Edit your Skull Details</h2>\r\n                <label for=\"name\">Skull Name</label>\r\n                <input\r\n                  id=\"name\"\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label for=\"hobby\">Hobbies/Motto</label>\r\n                <input\r\n                  id=\"hobby\"\r\n                  type=\"text\"\r\n                  name=\"hobby\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label for=\"description\">Skull's Story</label>\r\n                <div\r\n                  style={{ overflowY: 'scroll' }}\r\n                >\r\n                  <ReactQuill\r\n                    className=\"description-editor\"\r\n                    modules={modules}\r\n                    formats={formats}\r\n                    value={editorStory.description}\r\n                    onChange={handleFieldChange}\r\n                    placeholder={\"Write something awesome...\"}\r\n                    name=\"description\"\r\n                  />\r\n                </div>\r\n                <div\r\n                  className=\"pay-action\"\r\n                >\r\n                  {\r\n                    storyAllowance > 0 ? (\r\n                      <button\r\n                        className=\"skull-button save-grave\"\r\n                        onClick={() => saveSkullStory()}\r\n                      >\r\n                        Update using (10) Grave\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        className=\"skull-button save-grave\"\r\n                        onClick={() => dispatch(approveStories())}\r\n                      >\r\n                        Approve Story\r\n                      </button>\r\n                    )\r\n                  }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"sk-box container\">\r\n              <div className=\"image\">\r\n                <LazyLoadImage\r\n                  src={`${ipfsUri480}${tokenId}.webp`}\r\n                  className='card div-skull'\r\n                />\r\n                <span>Birth Date: {birthDate > 0 ? new Date(birthDate * 1000).toISOString().slice(0, 10) : ''}</span>\r\n                <span>Death Date: {deathDate > 0 ? new Date(deathDate * 1000).toISOString().slice(0, 10) : ''}</span>\r\n                <span>Faction: {faction}</span>\r\n                <span>Twitter: {twitter !== '' ? (\r\n                  <a href={twitter ? `https://twitter.com/${twitter.replace('@', '')}` : ''} target=\"_blank\" rel=\"noopener noreferrer\">{twitter}</a>\r\n                ) : ('')}</span>\r\n                {\r\n                  storyState.ownerOf && ethers.utils.getAddress(storyState.ownerOf) === ethers.utils.getAddress(accountAddress) ? (\r\n                    <button\r\n                      className=\"skull-button edit-button\"\r\n                      onClick={() => {\r\n                        setEditorStory({\r\n                          ...editorStory,\r\n                          display: true\r\n                        })\r\n                      }}\r\n                    >\r\n                      Edit Story\r\n                    </button>\r\n                  ) : (\r\n                    <span>\r\n                      Owner: {storyState.ownerOf ? `${storyState.ownerOf.substr(0, 5)}...${storyState.ownerOf.substr(38, 41)}` : ''}\r\n                    </span>\r\n                  )\r\n                }\r\n\r\n              </div>\r\n              <div className=\"metadata\">\r\n                <div\r\n                  className=\"close-icon\"\r\n                  onClick={() => {\r\n                    setStoryState({\r\n                      ...storyState,\r\n                      display: false\r\n                    })\r\n                  }}\r\n                >\r\n                  Close\r\n                </div>\r\n                <h2>{name}</h2>\r\n                <span>Hobby: {hobby}</span>\r\n                <div\r\n                  className=\"description\"\r\n                  dangerouslySetInnerHTML={{ __html: description }\r\n                  }\r\n                >\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : ('')}\r\n    </ >\r\n  )\r\n}\r\n\r\nlet modules = {\r\n  toolbar: [\r\n    [{ 'header': [1, 2, false] }],\r\n    ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n    [{ 'list': 'ordered' }, { 'list': 'bullet' }, { 'indent': '-1' }, { 'indent': '+1' }],\r\n    ['clean']\r\n  ],\r\n};\r\n\r\nlet formats = [\r\n  'header',\r\n  'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n  'list', 'bullet', 'indent',\r\n];\r\n\r\nexport default Tavern;\r\n"]},"metadata":{},"sourceType":"module"}