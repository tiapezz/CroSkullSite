{"ast":null,"code":"'use strict';\n\nvar varint = require('varint');\n\nvar uint8ArrayFromString = require('uint8arrays/from-string');\n\nvar uint8ArrayToString = require('uint8arrays/to-string');\n\nvar encoder = require('./encoder');\n\nfunction stringEncodingLength(val) {\n  var len = uint8ArrayFromString(val).byteLength;\n  return varint.encodingLength(len) + len;\n}\n\nfunction stringEncode(val, buffer, dataView, offset) {\n  var oldOffset = offset;\n  var len = uint8ArrayFromString(val).byteLength;\n  varint.encode(len, buffer, offset, 'utf-8');\n  offset += varint.encode.bytes;\n  var arr = uint8ArrayFromString(val);\n  buffer.set(arr, offset);\n  offset += arr.length;\n  stringEncode.bytes = offset - oldOffset;\n}\n\nfunction stringDecode(buffer, dataView, offset) {\n  var oldOffset = offset;\n  var len = varint.decode(buffer, offset);\n  offset += varint.decode.bytes;\n  var val = uint8ArrayToString(buffer.subarray(offset, offset + len));\n  offset += len;\n  stringDecode.bytes = offset - oldOffset;\n  return val;\n}\n\nmodule.exports = encoder(2, stringEncode, stringDecode, stringEncodingLength);","map":null,"metadata":{},"sourceType":"script"}