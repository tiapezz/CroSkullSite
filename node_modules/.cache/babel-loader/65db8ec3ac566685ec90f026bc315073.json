{"ast":null,"code":"import _toConsumableArray from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\src\\\\components\\\\Gallery\\\\Gallery.jsx\";\n\nimport { ethers } from 'ethers';\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport store from \"../../redux/store\";\nimport { loadAllSkull, getAttribute, resetSkullList, getEbisusLink } from \"../../redux/gallery/galleryAction\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faDungeon, faStore } from '@fortawesome/free-solid-svg-icons';\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport './gallery.css';\nimport { sendNotification } from '../../redux/data/dataActions';\nimport { loadingGif } from './loading.gif';\nimport bgIcon from './Icon/bg.png';\nimport bodyIcon from './Icon/body.png';\nimport noseIcon from './Icon/nose.png';\nimport skullIcon from './Icon/skull.png';\nimport eyesIcon from './Icon/eyes.png';\nimport hatIcon from './Icon/hat.png';\nimport numberIcon from './Icon/number.png';\nimport ebisusIcon from './Icon/ebisus-icon.png';\nimport { faAngleUp, faAngleDown, faQuestionCircle, faExternalLink, faEye, faPortrait, faStoreAlt } from '@fortawesome/free-solid-svg-icons';\nvar ipfsUri480 = \"https://croskull.mypinata.cloud/ipfs/QmWu9bKunKbv8Kkq8wEWGpCaW47oMBbH6ep4ZWBzAxHtgj/\";\nvar ipfsUri = 'https://ipfs.io/ipfs/QmZA9idEBomqsYBvA9ZH5JzuirmyQ414UBaqBGaEk2w69x/';\n\nvar Gallery = function Gallery() {\n  var dispatch = useDispatch();\n\n  var _store$getState = store.getState(),\n      blockchain = _store$getState.blockchain,\n      gallery = _store$getState.gallery;\n\n  var accountAddress = blockchain.accountAddress,\n      contractDetected = blockchain.contractDetected;\n  var skullsList = gallery.skullsList,\n      attributesList = gallery.attributesList,\n      ebisusLink = gallery.ebisusLink;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      viewInventory = _useState2[0],\n      toggleInventory = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      page = _useState4[0],\n      setPage = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hasData = _useState6[0],\n      toggleData = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sort = _useState8[0],\n      setSort = _useState8[1];\n\n  var _useState9 = useState([{\n    name: 'Background',\n    value: []\n  }, {\n    name: 'Skull',\n    value: []\n  }, {\n    name: 'Body',\n    value: []\n  }, {\n    name: 'Nose',\n    value: []\n  }, {\n    name: 'Eyes',\n    value: []\n  }, {\n    name: 'Hat',\n    value: []\n  }, {\n    name: 'Trait',\n    value: []\n  }]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      filter = _useState10[0],\n      setFilter = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      angleIconFilter = _useState12[0],\n      setAngleIconFilter = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      filterModal = _useState14[0],\n      setFilterModal = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      skullModal = _useState16[0],\n      setSkullModal = _useState16[1];\n\n  var _useState17 = useState(),\n      _useState18 = _slicedToArray(_useState17, 2),\n      skullData = _useState18[0],\n      setSkullData = _useState18[1];\n\n  var _useState19 = useState(true),\n      _useState20 = _slicedToArray(_useState19, 2),\n      spinner = _useState20[0],\n      setSpinner = _useState20[1];\n\n  var _useState21 = useState(),\n      _useState22 = _slicedToArray(_useState21, 2),\n      skullArr = _useState22[0],\n      setSkullArr = _useState22[1];\n\n  var scroller = null;\n  var myRef;\n\n  var _useState23 = useState(0),\n      _useState24 = _slicedToArray(_useState23, 2),\n      scrollTop = _useState24[0],\n      setScrollTop = _useState24[1];\n\n  useEffect(function () {\n    dispatch(loadAllSkull(page));\n    dispatch(getAttribute());\n    toggleData(true);\n\n    if (scroller) {\n      scroller.addEventListener('scroll', handleScroll.bind(_this), false);\n    }\n\n    myRef = React.createRef();\n  }, []);\n  var elementRef = React.useRef();\n  var isInViewport = useIsInViewport(elementRef);\n\n  function useIsInViewport(ref) {\n    var _useState25 = useState(false),\n        _useState26 = _slicedToArray(_useState25, 2),\n        isInViewPort = _useState26[0],\n        setIsInViewport = _useState26[1];\n\n    useEffect(function () {\n      function handleScroll() {\n        var _ref$current$getBound = ref.current.getBoundingClientRect(),\n            bottom = _ref$current$getBound.bottom;\n\n        return setIsInViewport(window.innerHeight - bottom > 20);\n      }\n\n      window.addEventListener(\"scroll\", handleScroll);\n      return function () {\n        return window.removeEventListener(\"scroll\", handleScroll);\n      };\n    }, [ref, isInViewPort]);\n    return isInViewPort;\n  }\n\n  function openSkullModal(croskull) {\n    setSkullData(croskull);\n    setSkullModal(true);\n    dispatch(getEbisusLink(croskull));\n    console.log(croskull);\n  }\n\n  function closeSkullModal() {\n    setSkullModal(false);\n  }\n\n  function selectSort(event) {\n    var select = document.getElementById('sortBy');\n    var value = select.selectedIndex;\n    sort = value;\n    setSort(value);\n    loadSkullFilter();\n  }\n\n  var setFilterAngleState = function setFilterAngleState(i) {\n    var ids = _toConsumableArray(angleIconFilter);\n\n    ids[i] = !ids[i];\n    setAngleIconFilter(ids);\n  };\n\n  var ShowCheckbox = function ShowCheckbox(i) {\n    setFilterAngleState(i);\n    var d = document.getElementById(\"filter-checkbox-\" + i);\n    d.style.height = 'auto';\n  };\n\n  function loadSkullFilter() {\n    dispatch(resetSkullList());\n    dispatch(loadAllSkull());\n  }\n\n  function addFilter(name, value) {\n    switch (name) {\n      case 'Background':\n        if (!filter[0].value.includes(value)) filter[0].value.push(value);else {\n          var index = filter[0].value.indexOf(value);\n          filter[0].value.splice(index, 1);\n        }\n        break;\n\n      case 'Skull':\n        if (!filter[1].value.includes(value)) filter[1].value.push(value);else {\n          var _index = filter[1].value.indexOf(value);\n\n          filter[1].value.splice(_index, 1);\n        }\n        break;\n\n      case 'Body':\n        if (!filter[2].value.includes(value)) filter[2].value.push(value);else {\n          var _index2 = filter[2].value.indexOf(value);\n\n          filter[2].value.splice(_index2, 1);\n        }\n        break;\n\n      case 'Nose':\n        if (!filter[3].value.includes(value)) filter[3].value.push(value);else {\n          var _index3 = filter[3].value.indexOf(value);\n\n          filter[3].value.splice(_index3, 1);\n        }\n        break;\n\n      case 'Eyes':\n        if (!filter[4].value.includes(value)) filter[4].value.push(value);else {\n          var _index4 = filter[4].value.indexOf(value);\n\n          filter[4].value.splice(_index4, 1);\n        }\n        break;\n\n      case 'Hat':\n        if (!filter[5].value.includes(value)) filter[5].value.push(value);else {\n          var _index5 = filter[5].value.indexOf(value);\n\n          filter[5].value.splice(_index5, 1);\n        }\n\n      case 'Trait':\n        if (!filter[6].value.includes(value)) filter[6].value.push(value);else {\n          var _index6 = filter[6].value.indexOf(value);\n\n          filter[6].value.splice(_index6, 1);\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    loadSkullFilter();\n  }\n\n  function checkFilter(cr) {\n    var flag = true;\n    filter.map(function (f) {\n      if (f.value.length > 0 && flag) {\n        cr.nft.attributes.map(function (at) {\n          if (at.trait_type == f.name && flag) {\n            if (f.value.includes(at.value)) flag = true;else {\n              flag = false;\n            }\n          }\n        });\n      }\n    });\n    console.log(flag);\n    return flag;\n  }\n\n  function enableFitler() {\n    var f = document.getElementById('filter-container');\n    var s = document.getElementById('skull-box');\n    var b = document.getElementById('filter-button');\n\n    if (f.style.display.includes('none')) {\n      f.style.display = 'block';\n      s.style.display = 'none';\n      b.innerHTML = 'Skulls';\n    } else {\n      f.style.display = 'none';\n      s.style.display = 'block';\n      b.innerHTML = 'Filters';\n    }\n  }\n\n  function clear() {\n    sort = 0;\n    setSort(0);\n    filter.map(function (f) {\n      f.value = [];\n    });\n    var select = document.getElementById('sortBy').options;\n    select[0].selected = true; //seleziono la prima scelta\n\n    attributesList.map(function (attribute, i) {\n      attribute.value.map(function (value) {\n        var s = document.getElementById(attribute.name + '-' + value);\n        console.log(s);\n        s.checked = false;\n      });\n    });\n    loadSkullFilter();\n  }\n\n  function chooseIcon(at) {\n    switch (at) {\n      case 'Background':\n        return bgIcon;\n\n      case 'Nose':\n        return noseIcon;\n\n      case 'Hat':\n        return hatIcon;\n\n      case 'Skull':\n        return skullIcon;\n\n      case 'Eyes':\n        return eyesIcon;\n\n      case 'Body':\n        return bodyIcon;\n\n      case 'Trait':\n        return numberIcon;\n    }\n  }\n\n  var handleScroll = function handleScroll() {\n    if (scroller == null) return;\n    var scrollHeight = scroller.scrollHeight,\n        scrollTop = scroller.scrollTop,\n        clientHeight = scroller.clientHeight;\n    var scroll = scrollHeight - scrollTop - clientHeight;\n    console.log(scroller);\n\n    if (scroll > 0) {// We are not at the bottom of the scroll content\n    } else if (scroll == 0) {// We are at the bottom\n    }\n  };\n\n  var listenScroll = function listenScroll(event) {\n    var scrollY = document.getElementsByClassName('skull-row').offset; //Don't get confused by what's scrolling - It's not the window\n\n    console.log(\"onScroll, window.scrollY: \".concat(scrollY, \" myRef.scrollTop: \"));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"skull-modal\",\n    hidden: !skullModal,\n    onClick: function onClick() {\n      closeSkullModal();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 13\n    }\n  }, skullData != null ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'modal-container ' + skullData.attributes[0].value,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-img\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: ipfsUri480 + skullData.edition + '.webp',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-desc\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"desc-header row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"desc-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 37\n    }\n  }, \"CroSkull\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 37\n    }\n  }, \"#\", skullData.edition)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"desc-icons\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: ipfsUri + skullData.edition + '.png',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 35\n    }\n  }, \" \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPortrait,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 79\n    }\n  })), ebisusLink ? /*#__PURE__*/React.createElement(\"a\", {\n    href: ebisusLink,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 39\n    }\n  }, \" \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faStoreAlt,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 61\n    }\n  })) : '')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attribute-container row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 25\n    }\n  }, skullData.attributes.map(function (at) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: 'attribute attribute-' + skullData.attributes[0].value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attribute-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: chooseIcon(at.trait_type),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attribute-desc\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"type\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 53\n      }\n    }, at.trait_type, \":\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"value\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 53\n      }\n    }, at.value)));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: 'attribute attribute-' + skullData.attributes[0].value,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attribute-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: chooseIcon('Trait'),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"attribute-desc\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"type\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 53\n    }\n  }, \"N. Trait:\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"value\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 53\n    }\n  }, skullData.attributes.length)))))))) : ''), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"gallery-container row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filter-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 17\n    }\n  }, \"Filter\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"skull-container\",\n    onScroll: listenScroll,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"skull-header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filter-bar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"skull-row row\",\n    id: \"skull-row\",\n    ref: elementRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 17\n    }\n  }, skullsList ? skullsList.map(function (skull) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"skull-card\",\n      key: skull.edition,\n      onClick: function onClick() {\n        return openSkullModal(skull);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"skull-img\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: ipfsUri480 + skull.edition + '.webp',\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"skull-desc\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"type\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 41\n      }\n    }, \"CroSkull\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"number\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 41\n      }\n    }, \"NO. \", skull.edition)));\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 33\n    }\n  }, \"Loading\")))));\n};\n\nexport default Gallery;","map":{"version":3,"sources":["F:/Mattia/Visual studio/AppCroskull/croskull-nft-marketplace/src/components/Gallery/Gallery.jsx"],"names":["ethers","React","useEffect","useState","useRef","useDispatch","store","loadAllSkull","getAttribute","resetSkullList","getEbisusLink","FontAwesomeIcon","faDungeon","faStore","LazyLoadImage","sendNotification","loadingGif","bgIcon","bodyIcon","noseIcon","skullIcon","eyesIcon","hatIcon","numberIcon","ebisusIcon","faAngleUp","faAngleDown","faQuestionCircle","faExternalLink","faEye","faPortrait","faStoreAlt","ipfsUri480","ipfsUri","Gallery","dispatch","getState","blockchain","gallery","accountAddress","contractDetected","skullsList","attributesList","ebisusLink","viewInventory","toggleInventory","page","setPage","hasData","toggleData","sort","setSort","name","value","filter","setFilter","angleIconFilter","setAngleIconFilter","filterModal","setFilterModal","skullModal","setSkullModal","skullData","setSkullData","spinner","setSpinner","skullArr","setSkullArr","scroller","myRef","scrollTop","setScrollTop","addEventListener","handleScroll","bind","createRef","elementRef","isInViewport","useIsInViewport","ref","isInViewPort","setIsInViewport","current","getBoundingClientRect","bottom","window","innerHeight","removeEventListener","openSkullModal","croskull","console","log","closeSkullModal","selectSort","event","select","document","getElementById","selectedIndex","loadSkullFilter","setFilterAngleState","i","ids","ShowCheckbox","d","style","height","addFilter","includes","push","index","indexOf","splice","checkFilter","cr","flag","map","f","length","nft","attributes","at","trait_type","enableFitler","s","b","display","innerHTML","clear","options","selected","attribute","checked","chooseIcon","scrollHeight","clientHeight","scroll","listenScroll","scrollY","getElementsByClassName","offset","edition","skull"],"mappings":"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","sourcesContent":["import { ethers } from 'ethers';\r\nimport React, { useEffect, useState, useRef  } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport store from \"../../redux/store\";\r\nimport { loadAllSkull, getAttribute,resetSkullList, getEbisusLink } from \"../../redux/gallery/galleryAction\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faDungeon, faStore } from '@fortawesome/free-solid-svg-icons';\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport './gallery.css';\r\nimport { sendNotification } from '../../redux/data/dataActions';\r\nimport {loadingGif} from './loading.gif';\r\nimport bgIcon from './Icon/bg.png';\r\nimport bodyIcon from './Icon/body.png';\r\nimport noseIcon from './Icon/nose.png';\r\nimport skullIcon from './Icon/skull.png';\r\nimport eyesIcon from './Icon/eyes.png';\r\nimport hatIcon from './Icon/hat.png';\r\nimport numberIcon from './Icon/number.png';\r\nimport ebisusIcon from './Icon/ebisus-icon.png';\r\nimport { faAngleUp, faAngleDown, faQuestionCircle, faExternalLink, faEye, faPortrait, faStoreAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst ipfsUri480 = \"https://croskull.mypinata.cloud/ipfs/QmWu9bKunKbv8Kkq8wEWGpCaW47oMBbH6ep4ZWBzAxHtgj/\"\r\nconst ipfsUri = 'https://ipfs.io/ipfs/QmZA9idEBomqsYBvA9ZH5JzuirmyQ414UBaqBGaEk2w69x/'\r\nconst Gallery = () => {\r\n    let dispatch = useDispatch();\r\n\r\n    let { blockchain, gallery } = store.getState()\r\n    let { accountAddress, contractDetected } = blockchain;\r\n    let { skullsList, attributesList, ebisusLink } = gallery;\r\n\r\n    const [viewInventory, toggleInventory] = useState(false)\r\n    let [page, setPage] = useState(0);\r\n    const [hasData, toggleData] = useState(false)\r\n    let [sort, setSort] = useState(0);\r\n    let [filter, setFilter] = useState([\r\n        { name: 'Background', value: [] },\r\n        { name: 'Skull', value: [] },\r\n        { name: 'Body', value: [] },\r\n        { name: 'Nose', value: [] },\r\n        { name: 'Eyes', value: [] },\r\n        { name: 'Hat', value: [] },\r\n        { name: 'Trait', value: [] }\r\n    ]);\r\n    let [angleIconFilter, setAngleIconFilter] = useState([]);\r\n    let [filterModal, setFilterModal] = useState(false);\r\n    let [skullModal, setSkullModal] = useState(false);\r\n    let [skullData, setSkullData] = useState()\r\n    let [spinner, setSpinner] = useState(true);\r\n    let [skullArr, setSkullArr] = useState();\r\n    let scroller= null;\r\n    let myRef;\r\n    let [scrollTop, setScrollTop] = useState(0);\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        dispatch(loadAllSkull(page))\r\n        dispatch(getAttribute())\r\n        toggleData(true)\r\n        if (scroller) {\r\n            scroller.addEventListener('scroll', handleScroll.bind(this), false)\r\n          }\r\n          myRef = React.createRef()\r\n    }, [])\r\n\r\n    const elementRef = React.useRef();\r\n    const isInViewport = useIsInViewport(elementRef);\r\n    function useIsInViewport(ref) {\r\n        const [isInViewPort, setIsInViewport] = useState(false);\r\n      \r\n        useEffect(() => {\r\n          function handleScroll() {\r\n            const { bottom } = ref.current.getBoundingClientRect();\r\n            return setIsInViewport(window.innerHeight - bottom > 20);\r\n          }\r\n      \r\n          window.addEventListener(\"scroll\", handleScroll);\r\n      \r\n          return () => window.removeEventListener(\"scroll\", handleScroll);\r\n        }, [ref, isInViewPort]);\r\n      \r\n        return isInViewPort;\r\n      }\r\n\r\n\r\n    function openSkullModal(croskull) {\r\n        setSkullData(croskull);\r\n        setSkullModal(true);\r\n        dispatch(getEbisusLink(croskull));\r\n        console.log(croskull);\r\n        \r\n    }\r\n\r\n    function closeSkullModal() {\r\n        setSkullModal(false);\r\n    }\r\n\r\n    function selectSort(event) {\r\n        const select = document.getElementById('sortBy');\r\n        let value = select.selectedIndex;\r\n        sort = value;\r\n        setSort(value);\r\n\r\n        loadSkullFilter();\r\n\r\n    }\r\n\r\n    const setFilterAngleState = (i) => {\r\n        let ids = [...angleIconFilter];\r\n        ids[i] = !ids[i];\r\n        setAngleIconFilter(ids);\r\n    }\r\n\r\n    const ShowCheckbox = (i) => {\r\n        setFilterAngleState(i);\r\n        let d = document.getElementById(\"filter-checkbox-\" + i);\r\n        d.style.height = 'auto';\r\n\r\n    }\r\n\r\n\r\n    function loadSkullFilter() {\r\n        dispatch(resetSkullList());\r\n        dispatch(loadAllSkull());\r\n    }\r\n\r\n    function addFilter(name, value) {\r\n        switch (name) {\r\n            case 'Background':\r\n                if (!filter[0].value.includes(value))\r\n                    filter[0].value.push(value);\r\n                else {\r\n                    const index = filter[0].value.indexOf(value);\r\n                    filter[0].value.splice(index, 1);\r\n                }\r\n                break;\r\n            case 'Skull':\r\n                if (!filter[1].value.includes(value))\r\n                    filter[1].value.push(value);\r\n                else {\r\n                    const index = filter[1].value.indexOf(value);\r\n                    filter[1].value.splice(index, 1);\r\n                }\r\n                break;\r\n            case 'Body':\r\n                if (!filter[2].value.includes(value))\r\n                    filter[2].value.push(value);\r\n                else {\r\n                    const index = filter[2].value.indexOf(value);\r\n                    filter[2].value.splice(index, 1);\r\n                }\r\n                break;\r\n            case 'Nose':\r\n                if (!filter[3].value.includes(value))\r\n                    filter[3].value.push(value);\r\n                else {\r\n                    const index = filter[3].value.indexOf(value);\r\n                    filter[3].value.splice(index, 1);\r\n                }\r\n                break;\r\n            case 'Eyes':\r\n                if (!filter[4].value.includes(value))\r\n                    filter[4].value.push(value);\r\n                else {\r\n                    const index = filter[4].value.indexOf(value);\r\n                    filter[4].value.splice(index, 1);\r\n                }\r\n                break;\r\n            case 'Hat':\r\n                if (!filter[5].value.includes(value))\r\n                    filter[5].value.push(value);\r\n                else {\r\n                    const index = filter[5].value.indexOf(value);\r\n                    filter[5].value.splice(index, 1);\r\n                }\r\n            case 'Trait':\r\n                if (!filter[6].value.includes(value))\r\n                    filter[6].value.push(value);\r\n                else {\r\n                    const index = filter[6].value.indexOf(value);\r\n                    filter[6].value.splice(index, 1);\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        loadSkullFilter();\r\n    }\r\n\r\n    function checkFilter(cr) {\r\n        let flag = true;\r\n        filter.map(f => {\r\n            if (f.value.length > 0 && flag) {\r\n                cr.nft.attributes.map(at => {\r\n                    if (at.trait_type == f.name && flag) {\r\n                        if (f.value.includes(at.value))\r\n                            flag = true\r\n                        else {\r\n                            flag = false;\r\n                        }\r\n                    }\r\n                })\r\n\r\n            }\r\n        })\r\n        console.log(flag);\r\n        return flag;\r\n    }\r\n\r\n    function enableFitler() {\r\n        let f = document.getElementById('filter-container');\r\n        let s = document.getElementById('skull-box');\r\n        let b = document.getElementById('filter-button')\r\n        if(f.style.display.includes('none'))\r\n            {\r\n                f.style.display = 'block';\r\n                s.style.display = 'none';\r\n                b.innerHTML = 'Skulls';\r\n            }\r\n        else{\r\n            f.style.display = 'none';\r\n            s.style.display = 'block';\r\n            b.innerHTML = 'Filters'\r\n        }\r\n    }\r\n\r\n    function clear() {\r\n        sort=0;\r\n        setSort(0);\r\n        filter.map((f)=>{\r\n            f.value =[];\r\n        })\r\n        let select = document.getElementById('sortBy').options;\r\n        select[0].selected = true; //seleziono la prima scelta\r\n        attributesList.map((attribute,i) =>{\r\n            attribute.value.map(value =>{\r\n                let s = document.getElementById(attribute.name + '-' + value);\r\n                console.log(s);\r\n                s.checked = false;\r\n            })\r\n        \r\n        })\r\n        loadSkullFilter();\r\n    }\r\n\r\n    function chooseIcon(at) {\r\n        switch(at){\r\n            case 'Background':\r\n                return bgIcon;\r\n            case 'Nose':\r\n                return noseIcon;\r\n            case 'Hat':\r\n                return hatIcon;\r\n            case 'Skull':\r\n                return skullIcon;\r\n            case 'Eyes':\r\n                return eyesIcon;\r\n            case 'Body':\r\n                return bodyIcon;\r\n            case 'Trait':\r\n                return numberIcon;\r\n        }\r\n    }\r\n\r\n  \r\n  const handleScroll = () => {\r\n    if (scroller == null) return\r\n    const { scrollHeight, scrollTop, clientHeight } = scroller\r\n    const scroll = scrollHeight - scrollTop - clientHeight\r\n    console.log(scroller)\r\n    if (scroll > 0) {\r\n      // We are not at the bottom of the scroll content\r\n    }\r\n    else if (scroll == 0){\r\n      // We are at the bottom\r\n    }\r\n  }\r\n\r\n    const listenScroll= (event) => {\r\n        const scrollY = document.getElementsByClassName('skull-row').offset //Don't get confused by what's scrolling - It's not the window\r\n\r\n        console.log(`onScroll, window.scrollY: ${scrollY} myRef.scrollTop: `)\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <div  className='skull-modal' hidden={!skullModal} onClick={() => { closeSkullModal() }}>\r\n            {\r\n                skullData != null ?\r\n                <>\r\n                <div className={'modal-container '+skullData.attributes[0].value} >\r\n                    <div className='row'>\r\n                        <div className='modal-img'>\r\n                        <img src={ipfsUri480+skullData.edition+'.webp'} />\r\n                        </div>\r\n                        <div className='modal-desc'>\r\n                            <div className='desc-header row'>\r\n                                <div className='desc-title'>\r\n                                    <p>CroSkull</p> \r\n                                    <h1>#{skullData.edition}</h1>\r\n                                </div>\r\n                                <div className='desc-icons'>\r\n                                  <a href={ipfsUri+skullData.edition+'.png'}> <FontAwesomeIcon icon={faPortrait} /></a> \r\n                                  {\r\n                                      ebisusLink ?\r\n                                      <a href={ebisusLink}> <FontAwesomeIcon icon={faStoreAlt} /></a>\r\n                                      :\r\n                                      ''\r\n                                  }\r\n                                  \r\n                                </div>\r\n                           </div>\r\n                           \r\n                        <div className='attribute-container row'>\r\n                                    {skullData.attributes.map(at => {\r\n                                        return (\r\n                                            <div className={'attribute attribute-'+skullData.attributes[0].value}>\r\n                                                <div className='attribute-icon'>\r\n                                                    <img src={chooseIcon(at.trait_type)} />\r\n                                                </div>\r\n                                                <div className='attribute-desc'>\r\n                                                    <p className='type'>{at.trait_type}:</p>\r\n                                                    <p className='value'>{at.value}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        )\r\n                                    })}\r\n                                    <div className={'attribute attribute-'+skullData.attributes[0].value}>\r\n                                                <div className='attribute-icon'>\r\n                                                    <img src={chooseIcon('Trait')} />\r\n                                                </div>\r\n                                                <div className='attribute-desc'>\r\n                                                    <p className='type'>N. Trait:</p>\r\n                                                    <p className='value'>{skullData.attributes.length}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                </>\r\n                :\r\n                ''\r\n            }\r\n            </div>\r\n        <div className='gallery-container row'>\r\n            <div className='filter-container'>\r\n                <h1>Filter</h1>\r\n            </div>\r\n            <div className='skull-container' onScroll={listenScroll}>\r\n                <div className='skull-header'>\r\n\r\n                </div>\r\n                <div className='filter-bar'>\r\n\r\n                </div>\r\n                <div className='skull-row row' id='skull-row' ref={elementRef}>\r\n                    {\r\n                        skullsList ? \r\n                        (\r\n                            skullsList.map(skull =>{\r\n                                return(\r\n                                <div className='skull-card' key={skull.edition} onClick={() => openSkullModal(skull)}>\r\n                                    <div className='skull-img'>\r\n                                        <img src={ipfsUri480+skull.edition+'.webp'} />\r\n                                    </div>\r\n                                    <div className='skull-desc'>\r\n                                        <p className='type'>CroSkull</p>\r\n                                        <p className='number'>NO. {skull.edition}</p>\r\n                                    </div>\r\n                                </div>\r\n                                )\r\n                            })\r\n\r\n                            ) :\r\n                            (\r\n                                <div>\r\n                                    Loading\r\n                                </div>\r\n                            )\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        </ >\r\n    )\r\n}\r\n\r\nexport default Gallery;\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}