{"ast":null,"code":"import _regeneratorRuntime from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\Mattia\\\\Visual studio\\\\AppCroskull\\\\croskull-nft-marketplace\\\\src\\\\components\\\\Raffle\\\\Raffle.jsx\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { ethers } from 'ethers';\nimport { useDispatch } from \"react-redux\";\nimport store from \"../../redux/store\";\nimport { loadRaffleData } from '../../redux/raffle/raffleActions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHourglassHalf, faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\nimport { sendNotification } from \"../../redux/data/dataActions\";\nimport IpfsHttpClient from \"ipfs-http-client\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport Grave from \"../Navbar/grave.png\";\nimport Rune from \"../Navbar/grave-burn.png\";\nimport Soul from \"../Navbar/soul.png\";\nimport \"react-quill/dist/quill.snow.css\";\nimport './Raffle.css';\n\nvar Raffle = function Raffle(_ref) {\n  var accountAddress = _ref.accountAddress;\n  var dispatch = useDispatch();\n\n  var _store$getState = store.getState(),\n      blockchain = _store$getState.blockchain,\n      raffle = _store$getState.raffle,\n      data = _store$getState.data;\n\n  var formatEther = blockchain.formatEther;\n  var userGraveBalance = data.userGraveBalance;\n  var isManager = raffle.isManager,\n      raffles = raffle.raffles,\n      allowance = raffle.allowance;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasData = _useState2[0],\n      toggleData = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      onlyActive = _useState4[0],\n      toggleActive = _useState4[1];\n\n  useEffect(function () {\n    if (blockchain.croRaffle) dispatch(loadRaffleData());\n  }, [blockchain.croRaffle]);\n\n  var _useState5 = useState({\n    title: '',\n    winners: [],\n    prize: 1,\n    coin: ''\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalState = _useState6[0],\n      setModalState = _useState6[1];\n\n  var _useState7 = useState({\n    display: false,\n    image: 0,\n    type: 0,\n    title: \"Thrid Raffle\",\n    winnersCount: 0,\n    maxParticipants: 0,\n    cost: 0,\n    collectionName: '',\n    collectionAddress: 0,\n    startTimestamp: 0,\n    endTimestamp: 0,\n    description: ''\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      raffleCreator = _useState8[0],\n      setRaffleCreator = _useState8[1];\n\n  var handleFieldChange = function handleFieldChange(event) {\n    var value = event.target ? event.target.value.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\") : event;\n    var name = event.target ? event.target.id : \"description\";\n    var type = event.target ? event.target.type : \"description\";\n\n    if (type === 'date') {\n      value = parseInt(new Date(value).getTime() / 1000);\n    }\n\n    setRaffleCreator(_objectSpread({}, raffleCreator, _defineProperty({}, name, value)));\n  };\n\n  var openModal = function openModal(raf) {\n    setModalState({\n      title: raf.title,\n      winners: raf.winners\n    });\n    var modal = document.getElementById(\"modal-winners\");\n    modal.style.display = \"block\";\n  };\n\n  var closeModal = function closeModal() {\n    var modal = document.getElementById(\"modal-winners\");\n    modal.style.display = \"none\";\n  };\n\n  var DAY_IN_SEC = 60 * 60 * 24;\n  var HUNDRED_DAYS_IN_SEC = 100 * DAY_IN_SEC; //100 * DAY_IN_SEC;\n\n  var formatDate = function formatDate(timestamp) {\n    var tsHours = timestamp / 60 / 60;\n    var days = parseInt(timestamp / DAY_IN_SEC);\n    var hoursDiff = tsHours - days * 24;\n    var hours = parseInt(hoursDiff);\n    var tsMinutes = hoursDiff * 60;\n    var minutes = parseInt(tsMinutes - hours * 60);\n    return {\n      days: days,\n      hours: hours,\n      minutes: minutes\n    };\n  };\n\n  var retrieveImage = function retrieveImage(e) {\n    var data = e.target.files[0];\n    var reader = new window.FileReader();\n    reader.readAsArrayBuffer(data);\n\n    reader.onloadend = function () {\n      setRaffleCreator(_objectSpread({}, raffleCreator, {\n        image: Buffer(reader.result)\n      }));\n    };\n\n    e.preventDefault();\n  };\n\n  var participateRaffle = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(raffleId, raf) {\n      var croRaffle, accountAddress, participateTx;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              croRaffle = blockchain.croRaffle, accountAddress = blockchain.accountAddress;\n              console.log(raffleId);\n              console.log(raf);\n              participateTx = croRaffle.participateRaffle(raffleId);\n              _context2.next = 6;\n              return participateTx.then( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(tx) {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          console.log(tx);\n                          dispatch(sendNotification({\n                            title: \"Transaction Sent\",\n                            message: 'Waiting for confirmation...',\n                            tx: tx,\n                            type: \"info\"\n                          }));\n                          _context.next = 4;\n                          return tx.wait(1);\n\n                        case 4:\n                          dispatch(sendNotification({\n                            title: \"Success!\",\n                            message: \"You are now participating\",\n                            tx: tx,\n                            type: \"success\"\n                          }));\n                          dispatch(loadRaffleData());\n\n                        case 6:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x3) {\n                  return _ref3.apply(this, arguments);\n                };\n              }());\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function participateRaffle(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var increaseAllowance = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var croRaffle, croSkullsGrave, accountAddress, approvalTx;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              croRaffle = blockchain.croRaffle, croSkullsGrave = blockchain.croSkullsGrave, accountAddress = blockchain.accountAddress;\n              approvalTx = croSkullsGrave.increaseAllowance(croRaffle.address, ethers.constants.MaxUint256.toString());\n              _context4.next = 4;\n              return approvalTx.then( /*#__PURE__*/function () {\n                var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(tx) {\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          console.log(tx);\n                          dispatch(sendNotification({\n                            title: \"Transaction Sent\",\n                            message: 'Waiting for confirmation...',\n                            tx: tx,\n                            type: \"info\"\n                          }));\n                          _context3.next = 4;\n                          return tx.wait(1);\n\n                        case 4:\n                          dispatch(sendNotification({\n                            title: \"Approved!\",\n                            message: \"You can now participate\",\n                            tx: tx,\n                            type: \"success\"\n                          }));\n                          dispatch(loadRaffleData());\n\n                        case 6:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3);\n                }));\n\n                return function (_x4) {\n                  return _ref5.apply(this, arguments);\n                };\n              }());\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function increaseAllowance() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var addRaffle = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var croRaffle, newRaffle, client, ipfsImage, rafflefied, descriptionBuffer, ipfsResponse, ipfsPath, addRaffleTx;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              croRaffle = blockchain.croRaffle;\n              setRaffleCreator(_objectSpread({}, raffleCreator, {\n                startTimestamp: parseInt(new Date().getTime() / 1000)\n              }));\n              _context6.prev = 2;\n              newRaffle = raffleCreator;\n              client = IpfsHttpClient(new URL('https://ipfs.infura.io:5001/api/v0'));\n\n              if (!raffleCreator.image) {\n                _context6.next = 10;\n                break;\n              }\n\n              _context6.next = 8;\n              return client.add(raffleCreator.image);\n\n            case 8:\n              ipfsImage = _context6.sent;\n              newRaffle.image = \"ipfs://\".concat(ipfsImage.path);\n\n            case 10:\n              rafflefied = JSON.stringify(raffleCreator);\n              descriptionBuffer = Buffer.from(rafflefied);\n              _context6.next = 14;\n              return client.add(descriptionBuffer);\n\n            case 14:\n              ipfsResponse = _context6.sent;\n\n              if (!(ipfsResponse.path !== \"\")) {\n                _context6.next = 20;\n                break;\n              }\n\n              ipfsPath = \"ipfs://\".concat(ipfsResponse.path);\n              addRaffleTx = croRaffle.addRaffle(raffleCreator.winnersCount, raffleCreator.collectionAddress, ethers.utils.parseEther(raffleCreator.cost), raffleCreator.endTimestamp, ipfsPath, raffleCreator.type * 100, raffleCreator.maxParticipants); //return;\n\n              _context6.next = 20;\n              return addRaffleTx.then( /*#__PURE__*/function () {\n                var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(tx) {\n                  return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          console.log(tx);\n                          dispatch(sendNotification({\n                            title: \"Transaction Sent\",\n                            message: 'Waiting for confirmation...',\n                            tx: tx,\n                            type: \"info\"\n                          }));\n                          _context5.next = 4;\n                          return tx.wait(2);\n\n                        case 4:\n                          dispatch(sendNotification({\n                            title: \"Raffle Created!\",\n                            message: \"Raffle Created Succesful\",\n                            tx: tx,\n                            type: \"success\"\n                          }));\n                          setRaffleCreator(_objectSpread({}, raffleCreator, {\n                            display: false\n                          }));\n                          dispatch(loadRaffleData());\n\n                        case 7:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _callee5);\n                }));\n\n                return function (_x5) {\n                  return _ref7.apply(this, arguments);\n                };\n              }());\n\n            case 20:\n              _context6.next = 25;\n              break;\n\n            case 22:\n              _context6.prev = 22;\n              _context6.t0 = _context6[\"catch\"](2);\n              console.log(_context6.t0.message);\n\n            case 25:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[2, 22]]);\n    }));\n\n    return function addRaffle() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal\",\n    id: \"modal-winners\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-w-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"raffle-head sk-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }, modalState.title), /*#__PURE__*/React.createElement(\"span\", {\n    class: \"close-btn\",\n    onClick: function onClick() {\n      closeModal();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, \"\\xD7\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }, \"Prize\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }\n  }, \"Address\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"winners-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, modalState.winners.map(function (winner, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }\n    }, i + 1), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"address\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, winner));\n  }))))), raffleCreator.display && isManager ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"story-modal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }\n  }, \"Raffle Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"image\",\n    onChange: retrieveImage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"endTimestamp\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 17\n    }\n  }, \"Finish date\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"endTimestamp\",\n    type: \"date\",\n    name: \"endTimestamp\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"type\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 17\n    }\n  }, \"Fast Raffle ( 0 = deactivated )\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"type\",\n    type: \"number\",\n    name: \"type\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"maxParticipants\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 17\n    }\n  }, \"Max Participants ( 0 = deactivated )\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"maxParticipants\",\n    type: \"number\",\n    name: \"maxParticipants\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"maxParticipants\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  }, \"Ticket Cost\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"cost\",\n    type: \"number\",\n    name: \"cost\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"winnersCount\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 17\n    }\n  }, \"Winners ( max 10 )\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"winnersCount\",\n    type: \"number\",\n    name: \"winnersCount\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"metadata\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close-icon\",\n    onClick: function onClick() {\n      setRaffleCreator(_objectSpread({}, raffleCreator, {\n        display: false\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 19\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      fontSize: '18px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 19\n    }\n  }, \"Create a new Raffle\"), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"collectionName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 19\n    }\n  }, \"Collection Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"collectionName\",\n    type: \"text\",\n    name: \"collectionName\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"collectionAddress\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 19\n    }\n  }, \"Collection Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"collectionAddress\",\n    type: \"text\",\n    name: \"collectionAddress\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 19\n    }\n  }, \"Raffle Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"title\",\n    type: \"text\",\n    name: \"title\",\n    onChange: handleFieldChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 19\n    }\n  }, \"Raffle Description\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowY: 'scroll'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ReactQuill, {\n    className: \"description-editor\",\n    modules: modules,\n    formats: formats,\n    value: raffleCreator.description,\n    onChange: handleFieldChange,\n    placeholder: \"Write something awesome...\",\n    name: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pay-action\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button save-grave\",\n    onClick: function onClick() {\n      return addRaffle();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 21\n    }\n  }, \"Add Raffle\"))))) : '', /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-container sk-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-box sk-column sk-raffle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sk-flex sk-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }\n  }, \"Bonesville Raffle\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tooltip-toggle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faQuestionCircle,\n    className: \"tooltip-icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sk-tooltip sk-tooltip-full\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 17\n    }\n  }, \"There are two types of raffles: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 51\n    }\n  }, \"Normal\"), \" and \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 69\n    }\n  }, \"Fast\"), \" Raffle.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 19\n    }\n  }, \"Normal\"), \" raffle has a maximum number of 10 prizes, a maximum number of participants and a time limit for entry. Once the maximum number of participants, or the time limit is reached, the smart contract will start a random draw and choose the winning wallets at random.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 19\n    }\n  }, \"Fast\"), \": The crazy raffle has a maximum number of 10 prizes, and no limit to number of participants. Each time a user purchases a raffle ticket, the time limit for the draw will be reduced by 2% of the remaining time for each new participant. (With a lot of participation, the raffle will end quickly!). The reduction % per new participants can vary. Once the time is up, the smart contract will draw the winners through a random draw, choosing the winning wallets at random. 1 prize per wallet per raffle.\"))), /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: onlyActive,\n    onChange: function onChange() {\n      return toggleActive(!onlyActive);\n    },\n    className: \"only-active\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 15\n    }\n  }), \"Only Active\")), isManager ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"skull-button\",\n    onClick: function onClick() {\n      return setRaffleCreator(_objectSpread({}, raffleCreator, {\n        display: true\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 15\n    }\n  }, \"Add Raffle\") : '', /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sk-raffle-list sk-flex sk-column\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 11\n    }\n  }, raffles && raffles.length > 0 ? raffles.map(function (raf) {\n    var type = raf.type,\n        title = raf.title,\n        winnersCount = raf.winnersCount,\n        maxParticipants = raf.maxParticipants,\n        cost = raf.cost,\n        image = raf.image,\n        isParticipant = raf.isParticipant,\n        endTimestamp = raf.endTimestamp,\n        description = raf.description,\n        participants = raf.participants,\n        winners = raf.winners;\n    var currentTimestamp = parseInt(new Date().getTime() / 1000);\n    if (onlyActive && (winners.length > 0 || endTimestamp < currentTimestamp)) return;\n    var raffleDuration = currentTimestamp < endTimestamp ? endTimestamp - currentTimestamp : 0;\n    var raffleDurationFormatted = formatDate(raffleDuration);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sk-raffle-item sk-flex sk-row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wd-22\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: String(image).replace('ipfs://', 'https://ipfs.infura.io/ipfs/'),\n      className: \"img-raffle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"raffle-box-1 wd-44 sk-flex sk-column\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"sk-raffle-details\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 25\n      }\n    }, \"\".concat(type > 0 ? \"\\uD83D\\uDD25 Fast Raffle \".concat(type, \"%\") : '☠️ Normal Raffle', \" | \\uD83C\\uDFC6 \").concat(winnersCount, \" Winners | \\uD83E\\uDD3E\\u200D\\u2642\\uFE0F \").concat(maxParticipants > 0 ? \"\".concat(participants, \"/\").concat(maxParticipants) : participants, \" Participants\")), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 25\n      }\n    }, title), /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: description.replace('<p><br></p>', '').replace('<p><br></p>', '')\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"raffle-box-2 wd-33\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 23\n      }\n    }, winners.length || endTimestamp <= new Date().timestamp / 1000 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"raffle-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 33\n      }\n    }, \"Cost: \", cost, /*#__PURE__*/React.createElement(\"img\", {\n      src: Grave,\n      className: \"skull-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 33\n      }\n    }, \"Finished \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faHourglassHalf,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 48\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button winners-button\",\n      onClick: function onClick() {\n        openModal(raf);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 31\n      }\n    }, \"View Winners\")) : isParticipant ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"raffle-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 33\n      }\n    }, \"Cost: \", cost, /*#__PURE__*/React.createElement(\"img\", {\n      src: Grave,\n      className: \"skull-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 33\n      }\n    }, \"Ending in: \", raffleDurationFormatted.days, \"d \", raffleDurationFormatted.hours, \"h \", raffleDurationFormatted.minutes, \"m \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faHourglassHalf,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 150\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button participated-button\",\n      disabled: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 31\n      }\n    }, \"Already Participated\")) : userGraveBalance && ethers.utils.parseEther(cost).gte(ethers.utils.parseEther(userGraveBalance)) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"raffle-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 33\n      }\n    }, \"Cost: \", cost, /*#__PURE__*/React.createElement(\"img\", {\n      src: Grave,\n      className: \"skull-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 33\n      }\n    }, \"Ending in: \", raffleDurationFormatted.days, \"d \", raffleDurationFormatted.hours, \"h \", raffleDurationFormatted.minutes, \"m \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faHourglassHalf,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 150\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button buy-button\",\n      onClick: function onClick() {\n        return window.open('https://mm.finance/swap?outputCurrency=0x9885488cD6864DF90eeBa6C5d07B35f08CEb05e9');\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 31\n      }\n    }, \"Buy Grave\")) : ethers.utils.parseEther(allowance).gte(ethers.utils.parseEther(cost)) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"raffle-info\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 33\n      }\n    }, \"Cost: \", cost, /*#__PURE__*/React.createElement(\"img\", {\n      src: Grave,\n      className: \"skull-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 33\n      }\n    }, \"Ending in: \", raffleDurationFormatted.days, \"d \", raffleDurationFormatted.hours, \"h \", raffleDurationFormatted.minutes, \"m \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faHourglassHalf,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 150\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button participate-button\",\n      onClick: function onClick() {\n        participateRaffle(raf.id, raf);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 31\n      }\n    }, \"Participate\")) : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"skull-button winners-button\",\n      onClick: function onClick() {\n        increaseAllowance();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 29\n      }\n    }, \"Approve\")));\n  }) : ''))));\n};\n\nvar modules = {\n  toolbar: [[{\n    'header': [1, 2, false]\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    'list': 'ordered'\n  }, {\n    'list': 'bullet'\n  }, {\n    'indent': '-1'\n  }, {\n    'indent': '+1'\n  }], ['clean']]\n};\nvar formats = ['header', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'indent'];\nexport default Raffle;","map":{"version":3,"sources":["F:/Mattia/Visual studio/AppCroskull/croskull-nft-marketplace/src/components/Raffle/Raffle.jsx"],"names":["React","useEffect","useState","ethers","useDispatch","store","loadRaffleData","FontAwesomeIcon","faHourglassHalf","faQuestionCircle","sendNotification","IpfsHttpClient","ReactQuill","Grave","Rune","Soul","Raffle","accountAddress","dispatch","getState","blockchain","raffle","data","formatEther","userGraveBalance","isManager","raffles","allowance","hasData","toggleData","onlyActive","toggleActive","croRaffle","title","winners","prize","coin","modalState","setModalState","display","image","type","winnersCount","maxParticipants","cost","collectionName","collectionAddress","startTimestamp","endTimestamp","description","raffleCreator","setRaffleCreator","handleFieldChange","event","value","target","replace","name","id","parseInt","Date","getTime","openModal","raf","modal","document","getElementById","style","closeModal","DAY_IN_SEC","HUNDRED_DAYS_IN_SEC","formatDate","timestamp","tsHours","days","hoursDiff","hours","tsMinutes","minutes","retrieveImage","e","files","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","result","preventDefault","participateRaffle","raffleId","console","log","participateTx","then","tx","message","wait","increaseAllowance","croSkullsGrave","approvalTx","address","constants","MaxUint256","toString","addRaffle","newRaffle","client","URL","add","ipfsImage","path","rafflefied","JSON","stringify","descriptionBuffer","from","ipfsResponse","ipfsPath","addRaffleTx","utils","parseEther","map","winner","i","fontSize","overflowY","modules","formats","length","isParticipant","participants","currentTimestamp","raffleDuration","raffleDurationFormatted","String","__html","gte","open","toolbar"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { ethers } from 'ethers';\r\nimport { useDispatch } from \"react-redux\";\r\nimport store from \"../../redux/store\";\r\nimport { loadRaffleData } from '../../redux/raffle/raffleActions';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHourglassHalf, faQuestionCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { sendNotification } from \"../../redux/data/dataActions\";\r\nimport IpfsHttpClient from \"ipfs-http-client\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport Grave from \"../Navbar/grave.png\";\r\nimport Rune from \"../Navbar/grave-burn.png\";\r\nimport Soul from \"../Navbar/soul.png\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport './Raffle.css';\r\n\r\nconst Raffle = ({ accountAddress }) => {\r\n  let dispatch = useDispatch()\r\n  let { blockchain, raffle, data } = store.getState()\r\n  let { formatEther } = blockchain\r\n  let { userGraveBalance } = data\r\n  let { isManager, raffles, allowance } = raffle\r\n  const [hasData, toggleData] = useState(false)\r\n  const [onlyActive, toggleActive] = useState(false)\r\n\r\n  useEffect( () => {\r\n    if(blockchain.croRaffle )\r\n      dispatch(loadRaffleData())\r\n  }, [blockchain.croRaffle])\r\n\r\n  const [modalState, setModalState] = useState({\r\n    title: '',\r\n    winners: [],\r\n    prize: 1,\r\n    coin: ''\r\n  });\r\n\r\n  const [raffleCreator, setRaffleCreator] = useState( {\r\n    display: false,\r\n    image: 0,\r\n    type: 0,\r\n    title: \"Thrid Raffle\",\r\n    winnersCount: 0,\r\n    maxParticipants: 0,\r\n    cost: 0,\r\n    collectionName: '',\r\n    collectionAddress: 0,\r\n    startTimestamp: 0,\r\n    endTimestamp: 0,\r\n    description: '',\r\n  } )\r\n\r\n  const handleFieldChange = ( event ) => {\r\n    let value = event.target ? event.target.value.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\") : event\r\n    let name = event.target ? event.target.id : \"description\"\r\n    let type = event.target ? event.target.type : \"description\"\r\n    if( type === 'date' ){\r\n      value = parseInt( new Date( value ).getTime() / 1000 )\r\n    }\r\n    setRaffleCreator( {\r\n      ...raffleCreator,\r\n      [name]: value\r\n    } )\r\n  }\r\n\r\n\r\n  const openModal = (raf) => {\r\n    setModalState({\r\n      title: raf.title,\r\n      winners: raf.winners\r\n    })\r\n    let modal = document.getElementById(\"modal-winners\");\r\n    modal.style.display = \"block\";\r\n  }\r\n  const closeModal = () => {\r\n    let modal = document.getElementById(\"modal-winners\");\r\n    modal.style.display = \"none\";\r\n  }\r\n\r\n  const DAY_IN_SEC = 60 * 60 * 24;\r\n  const HUNDRED_DAYS_IN_SEC = 100 * DAY_IN_SEC//100 * DAY_IN_SEC;\r\n  const formatDate = (timestamp) => {\r\n    let tsHours = timestamp / 60 / 60\r\n    let days = parseInt(timestamp / DAY_IN_SEC)\r\n    let hoursDiff = tsHours - (days * 24)\r\n    let hours = parseInt(hoursDiff)\r\n    let tsMinutes = hoursDiff * 60\r\n    let minutes = parseInt(tsMinutes - (hours * 60))\r\n    return {\r\n      days,\r\n      hours,\r\n      minutes\r\n    }\r\n  }\r\n\r\n  const retrieveImage = (e) => {\r\n    const data = e.target.files[0];\r\n    const reader = new window.FileReader();\r\n    reader.readAsArrayBuffer(data);\r\n    reader.onloadend = () => {\r\n      setRaffleCreator({\r\n        ...raffleCreator,\r\n        image: Buffer(reader.result)\r\n      });\r\n    }\r\n    e.preventDefault();  \r\n  }\r\n\r\n\r\n  const participateRaffle = async (raffleId,raf) => {\r\n    let { croRaffle, accountAddress } = blockchain\r\n    console.log(raffleId)\r\n    console.log(raf)\r\n    let participateTx = croRaffle.participateRaffle(\r\n      raffleId\r\n    )\r\n    await participateTx.then(\r\n      async (tx) => {\r\n        console.log( tx )\r\n        dispatch(sendNotification({\r\n          title: `Transaction Sent`,\r\n          message: 'Waiting for confirmation...',\r\n          tx,\r\n          type: \"info\"\r\n        }))\r\n        await tx.wait(1)\r\n        dispatch(sendNotification({\r\n          title: `Success!`,\r\n          message: `You are now participating`,\r\n          tx,\r\n          type: \"success\"\r\n        }))\r\n        dispatch(loadRaffleData())\r\n      }\r\n    )\r\n  }\r\n\r\n  const increaseAllowance = async () => {\r\n    let { croRaffle, croSkullsGrave, accountAddress } = blockchain\r\n    let approvalTx = croSkullsGrave.increaseAllowance(\r\n      croRaffle.address,\r\n      ethers.constants.MaxUint256.toString()\r\n    )\r\n    await approvalTx.then(\r\n      async (tx) => {\r\n        console.log( tx )\r\n        dispatch(sendNotification({\r\n          title: `Transaction Sent`,\r\n          message: 'Waiting for confirmation...',\r\n          tx,\r\n          type: \"info\"\r\n        }))\r\n        await tx.wait(1)\r\n        dispatch(sendNotification({\r\n          title: `Approved!`,\r\n          message: `You can now participate`,\r\n          tx,\r\n          type: \"success\"\r\n        }))\r\n        dispatch(loadRaffleData())\r\n      }\r\n    )\r\n  }\r\n\r\n  const addRaffle = async ( ) => {\r\n    let { croRaffle } = blockchain\r\n    setRaffleCreator({\r\n      ...raffleCreator,\r\n      startTimestamp: parseInt( new Date( ).getTime() / 1000 ),\r\n    })\r\n    try {\r\n      let newRaffle = raffleCreator;\r\n      const client = IpfsHttpClient(new URL('https://ipfs.infura.io:5001/api/v0'));\r\n      if( raffleCreator.image ){\r\n        const ipfsImage = await client.add(raffleCreator.image);\r\n        newRaffle.image = `ipfs://${ipfsImage.path}`\r\n      }\r\n      let rafflefied = JSON.stringify(raffleCreator)\r\n      let descriptionBuffer = Buffer.from(rafflefied)\r\n      const ipfsResponse = await client.add(descriptionBuffer);\r\n      if( ipfsResponse.path !== \"\" ){\r\n          let ipfsPath = `ipfs://${ipfsResponse.path}`\r\n          let addRaffleTx = croRaffle.addRaffle(\r\n            raffleCreator.winnersCount,\r\n            raffleCreator.collectionAddress,\r\n            ethers.utils.parseEther(raffleCreator.cost),\r\n            raffleCreator.endTimestamp,\r\n            ipfsPath,\r\n            raffleCreator.type * 100,\r\n            raffleCreator.maxParticipants\r\n          )\r\n            //return;\r\n            await addRaffleTx.then(\r\n              async (tx) => {\r\n                console.log( tx )\r\n                dispatch(sendNotification({\r\n                  title: `Transaction Sent`,\r\n                  message: 'Waiting for confirmation...',\r\n                  tx,\r\n                  type: \"info\"\r\n                }))\r\n                await tx.wait(2)\r\n                dispatch(sendNotification({\r\n                  title: `Raffle Created!`,\r\n                  message: `Raffle Created Succesful`,\r\n                  tx,\r\n                  type: \"success\"\r\n                }))\r\n                setRaffleCreator({\r\n                  ...raffleCreator,\r\n                  display: false\r\n                })\r\n                dispatch(loadRaffleData())\r\n              }\r\n          )\r\n      }\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"modal\" id=\"modal-winners\">\r\n        <div className=\"modal-w-content\">\r\n          <div className=\"sk-box\">\r\n            <div class=\"raffle-head sk-flex\">\r\n              <h1>{modalState.title}</h1>\r\n              <span class=\"close-btn\" onClick={() => { closeModal() }}>\r\n                &times;\r\n              </span>\r\n            </div>\r\n            <div className=\"modal-header\"> \r\n              <h3>Prize</h3>\r\n              <span>\r\n                <h3>Address</h3>\r\n              </span>\r\n            </div>\r\n            <div className=\"winners-list\">\r\n            {\r\n              modalState.winners.map((winner,i) => {\r\n                return (\r\n                  <div className=\"modal-header\">\r\n                    <h3>{i+1}</h3>\r\n                    <span className=\"address\">{winner}</span>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        {\r\n          raffleCreator.display && isManager ? (\r\n            <div className=\"story-modal\">\r\n              <div \r\n                className=\"sk-box container\" \r\n              >\r\n              <div className=\"image\">\r\n                <label for=\"image\">Raffle Image</label>\r\n                <input type=\"file\" name=\"image\" onChange={retrieveImage} />\r\n                <label for=\"endTimestamp\">Finish date</label>\r\n                <input\r\n                  id=\"endTimestamp\"\r\n                  type=\"date\"\r\n                  name=\"endTimestamp\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label htmlFor=\"type\">Fast Raffle ( 0 = deactivated )</label>\r\n                <input\r\n                  id=\"type\"\r\n                  type=\"number\"\r\n                  name=\"type\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label htmlFor=\"maxParticipants\">Max Participants ( 0 = deactivated )</label>\r\n                <input\r\n                  id=\"maxParticipants\"\r\n                  type=\"number\"\r\n                  name=\"maxParticipants\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label htmlFor=\"maxParticipants\">Ticket Cost</label>\r\n                <input\r\n                  id=\"cost\"\r\n                  type=\"number\"\r\n                  name=\"cost\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n                <label htmlFor=\"winnersCount\">Winners ( max 10 )</label>\r\n                <input\r\n                  id=\"winnersCount\"\r\n                  type=\"number\"\r\n                  name=\"winnersCount\"\r\n                  onChange={handleFieldChange}\r\n                />\r\n              </div>\r\n                <div className=\"metadata\">\r\n                  <div\r\n                    className=\"close-icon\"\r\n                    onClick={ () => {\r\n                      setRaffleCreator({\r\n                        ...raffleCreator,\r\n                        display: false\r\n                      })\r\n                    }}\r\n                  >\r\n                    Back\r\n                  </div>\r\n                  <h2 style={{ fontSize: '18px' }}>Create a new Raffle</h2>\r\n                  <label for=\"collectionName\">Collection Name</label>\r\n                  <input\r\n                    id=\"collectionName\"\r\n                    type=\"text\"\r\n                    name=\"collectionName\"\r\n                    onChange={handleFieldChange}\r\n                  />\r\n                  <label for=\"collectionAddress\">Collection Address</label>\r\n                  <input\r\n                    id=\"collectionAddress\"\r\n                    type=\"text\"\r\n                    name=\"collectionAddress\"\r\n                    onChange={handleFieldChange}\r\n                  />\r\n                  <label for=\"title\">Raffle Title</label>\r\n                  <input\r\n                    id=\"title\"\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    onChange={handleFieldChange}\r\n                  />\r\n                  <label for=\"description\">Raffle Description</label>\r\n                  <div\r\n                    style={{ overflowY: 'scroll'}}\r\n                  >\r\n                    <ReactQuill\r\n                      className=\"description-editor\"\r\n                      modules={modules}\r\n                      formats={formats}\r\n                      value={raffleCreator.description}\r\n                      onChange={handleFieldChange}\r\n                      placeholder={\"Write something awesome...\"}\r\n                      name=\"description\"\r\n                    />\r\n                  </div>\r\n                  <div\r\n                    className=\"pay-action\"\r\n                  >\r\n                    <button\r\n                      className=\"skull-button save-grave\"\r\n                      onClick={ () => addRaffle() }\r\n                    >\r\n                      Add Raffle\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : \r\n          ('')\r\n        }\r\n      <div className=\"sk-container sk-row\">\r\n        <div className=\"sk-box sk-column sk-raffle\">\r\n          <span className=\"sk-flex sk-row\">\r\n            <h3>Bonesville Raffle</h3>\r\n            <div className=\"tooltip-toggle\">\r\n              <FontAwesomeIcon \r\n                  icon={faQuestionCircle} \r\n                  className=\"tooltip-icon\"\r\n              /> \r\n              <span className=\"sk-tooltip sk-tooltip-full\">\r\n                <p>\r\n                  There are two types of raffles: <b>Normal</b> and <b>Fast</b> Raffle.\r\n                </p>\r\n                <p>\r\n                  <b>Normal</b> raffle has a maximum number of 10 prizes, a maximum number of participants and a time limit for entry. Once the maximum number of participants, or the time limit is reached, the smart contract will start a random draw and choose the winning wallets at random.\r\n                </p>\r\n                <p>\r\n                  <b>Fast</b>: The crazy raffle has a maximum number of 10 prizes, and no limit to number of participants. Each time a user purchases a raffle ticket, the time limit for the draw will be reduced by 2% of the remaining time for each new participant. (With a lot of participation, the raffle will end quickly!). The reduction % per new participants can vary. Once the time is up, the smart contract will draw the winners through a random draw, choosing the winning wallets at random. 1 prize per wallet per raffle.\r\n                </p>\r\n              </span>\r\n            </div>\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={onlyActive}\r\n                onChange={ () => toggleActive(!onlyActive)}\r\n                className=\"only-active\"\r\n              />\r\n              Only Active\r\n            </label>\r\n          </span>\r\n            {\r\n              isManager ? (\r\n              <button \r\n                className=\"skull-button\"\r\n                onClick={ () => \r\n                  setRaffleCreator({\r\n                    ...raffleCreator,\r\n                    display: true\r\n                  })\r\n                }\r\n              >\r\n                Add Raffle\r\n              </button>\r\n              ) : ('')\r\n            }\r\n          <div className=\"sk-raffle-list sk-flex sk-column\">\r\n            { raffles && raffles.length > 0 ?\r\n              raffles.map( raf => {\r\n                let {\r\n                  type, \r\n                  title, \r\n                  winnersCount, \r\n                  maxParticipants, \r\n                  cost,\r\n                  image,\r\n                  isParticipant,\r\n                  endTimestamp, \r\n                  description,\r\n                  participants,\r\n                  winners\r\n                } = raf\r\n                let currentTimestamp = parseInt( new Date( ).getTime() / 1000 )\r\n                if(  onlyActive && ( winners.length > 0 || endTimestamp < currentTimestamp ) ) return\r\n                let raffleDuration = currentTimestamp < endTimestamp ? endTimestamp - currentTimestamp : 0\r\n                let raffleDurationFormatted = formatDate(raffleDuration)\r\n                return (\r\n                  <div className=\"sk-raffle-item sk-flex sk-row\" >\r\n                    <div className=\"wd-22\">\r\n                      <img src={String(image).replace('ipfs://', 'https://ipfs.infura.io/ipfs/')} className=\"img-raffle\" />\r\n                    </div>\r\n                    <div className=\"raffle-box-1 wd-44 sk-flex sk-column\">\r\n                        <span className=\"sk-raffle-details\">\r\n                          { `${type > 0 ? `🔥 Fast Raffle ${type}%` : '☠️ Normal Raffle'} | 🏆 ${winnersCount} Winners | 🤾‍♂️ ${ maxParticipants > 0 ? `${participants}/${maxParticipants}` : participants } Participants` }\r\n                        </span>\r\n                        <h3>{title}</h3>\r\n                        <div\r\n                          dangerouslySetInnerHTML={{ __html: description.replace('<p><br></p>', '').replace('<p><br></p>', '') }}\r\n                        >\r\n                        </div>\r\n                    </div>\r\n                      <div className=\"raffle-box-2 wd-33\">\r\n                        {\r\n                          (winners.length || endTimestamp <= (new Date().timestamp/1000)) ? (\r\n                            <>\r\n                              <div className=\"raffle-info\">\r\n                                <span>Cost: { cost }<img src={Grave} className=\"skull-icon\" /></span>\r\n                                <span>Finished <FontAwesomeIcon icon={faHourglassHalf} /></span>\r\n                              </div>\r\n                              <button\r\n                                className=\"skull-button winners-button\" \r\n                                onClick={ () => { openModal(raf) }}\r\n                              >\r\n                                View Winners\r\n                              </button>\r\n                            </>\r\n                          ): isParticipant ? (\r\n                            <>\r\n                              <div className=\"raffle-info\">\r\n                                <span>Cost: { cost }<img src={Grave} className=\"skull-icon\" /></span>\r\n                                <span>Ending in: {raffleDurationFormatted.days}d {raffleDurationFormatted.hours}h {raffleDurationFormatted.minutes}m <FontAwesomeIcon icon={faHourglassHalf} /></span>\r\n                              </div>\r\n                              <button\r\n                                className=\"skull-button participated-button\"\r\n                                disabled\r\n                              >\r\n                                Already Participated\r\n                              </button>\r\n                            </>\r\n                          ) : userGraveBalance && ethers.utils.parseEther(cost).gte(ethers.utils.parseEther(userGraveBalance)) ? (\r\n                            <>\r\n                              <div className=\"raffle-info\">\r\n                                <span>Cost: { cost }<img src={Grave} className=\"skull-icon\" /></span>\r\n                                <span>Ending in: {raffleDurationFormatted.days}d {raffleDurationFormatted.hours}h {raffleDurationFormatted.minutes}m <FontAwesomeIcon icon={faHourglassHalf} /></span>\r\n                              </div>\r\n                              <button \r\n                                className=\"skull-button buy-button\" \r\n                                onClick={\r\n                                  () => window.open('https://mm.finance/swap?outputCurrency=0x9885488cD6864DF90eeBa6C5d07B35f08CEb05e9')\r\n                                } \r\n                              >\r\n                                Buy Grave\r\n                              </button>\r\n                            </>\r\n                          ) : ethers.utils.parseEther(allowance).gte(ethers.utils.parseEther(cost)) ? (\r\n                            <>\r\n                              <div className=\"raffle-info\">\r\n                                <span>Cost: { cost }<img src={Grave} className=\"skull-icon\" /></span>\r\n                                <span>Ending in: {raffleDurationFormatted.days}d {raffleDurationFormatted.hours}h {raffleDurationFormatted.minutes}m <FontAwesomeIcon icon={faHourglassHalf} /></span>\r\n                              </div>\r\n                              <button \r\n                                className=\"skull-button participate-button\" \r\n                                onClick={ () => { participateRaffle(raf.id,raf) } }\r\n                              >\r\n                                Participate\r\n                              </button>\r\n                            </>\r\n                          ) : (\r\n                            <button\r\n                              className=\"skull-button winners-button\" \r\n                              onClick={ () => { increaseAllowance() } }\r\n                            >\r\n                              Approve\r\n                            </button>\r\n                          )\r\n                        }\r\n                      </div>\r\n                  </div>\r\n                )\r\n              }) :\r\n                ('')\r\n              }\r\n          </div>\r\n        </div>\r\n          </div>\r\n    </>\r\n  )\r\n}\r\n\r\nlet modules = {\r\n  toolbar: [\r\n    [{ 'header': [1, 2, false] }],\r\n    ['bold', 'italic', 'underline','strike', 'blockquote'],\r\n    [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}],\r\n    ['clean']\r\n  ],\r\n};\r\n\r\nlet formats = [\r\n  'header',\r\n  'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n  'list', 'bullet', 'indent',\r\n];\r\n\r\nexport default Raffle;\r\n"]},"metadata":{},"sourceType":"module"}