# @hdwalletprovider

## Install

```
$ npm install hdwalletprovider
```

## Requirements

```
Node >= 7.6
Web3 ^1.2.0
```

## General Usage

You can use this provider wherever a Web3 provider is needed, not just in Truffle. For Truffle-specific usage, see next section.

By default, the `hdwalletprovider` will use the address of the first address that's generated from the mnemonic. If you pass in a specific index, it'll use that address instead.

### Instantiation

You can instantiate `hdwalletprovider` with options passed in an object with
named keys. You can specify the following options in your object:

```javascript
//Intialize a instance
const HDWalletProvider = require("hdwalletprovider");
//set private key and providerUrl (get apikey free from infura, or leave it empty to autoconnect.)
const providerEngine = new HDWalletProvider({
  privateKeys: ["3f841bf589fdf83a521e55d51afddc34fa65351161eead24f064855fc29c9580"],
  providerOrUrl: "wss://mainnet.infura.io/ws/v3/423243432234234234234234234234",
});

const HDWalletProvider = require("hdwalletprovider");
//load single private key as string
let provider = new HDWalletProvider("3f841bf589fdf83a521e55d51afddc34fa65351161eead24f064855fc29c9580");

// To make HDWallet less "chatty" over JSON-RPC,
/
// HDWalletProvider is compatible with Web3. Use it at Web3 constructor, just like any other Web3 Provider
const web3 = new Web3(provider);

// Or, if web3 is alreay initialized, you can call the 'setProvider' on web3, web3.eth, web3.shh and/or web3.bzz
web3.setProvider(provider);

// ...
// Write your code here.
// ...

// At termination, `provider.engine.stop()' should be called to finish the process elegantly.
provider.engine.stop();
```

### Using the legacy interface (deprecated)

The legacy interface is deprecated and it is recommended to pass options in an
object as detailed above. The following method of passing options is here
primarily to document the interface thoroughly and avoid confusion.

You can specify the following options in the order below.
Pass `undefined` if you want to omit a parameter.

Parameters:

| Parameter                | Type                | Default             | Required    | Description                                                                                    |
| ------------------------ | ------------------- | ------------------- | ----------- | ---------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| `mnemonic`/`privateKeys` | `string`/`string[]` | `null`              | [x]         | 12 word mnemonic which addresses are created from or array of private keys.                    |
| `providerOrUrl`          | `string\|object`    | `null`              | [x]         | URI or Ethereum client to send all other non-transaction-related Web3 requests                 |
| `addressIndex`           | `number`            | `0`                 | [ ]         | If specified, will tell the provider to manage the address at the index specified              |
| `numberOfAddresses`      | `number`            | `1`                 | [ ]         | If specified, will create `numberOfAddresses` addresses when instantiated                      |
| `shareNonce`             | `boolean`           | `true`              | [ ]         | If `false`, a new WalletProvider will track its own nonce-state                                |
| `derivationPath`         | `string`            | `"m/44'/60'/0'/0/"` | [ ]         | If specified, will tell the wallet engine what derivation path should use to derive addresses. |
| `chainId`                | `number/            | string`             | `undefined` | [ ]                                                                                            | Specify to enable signed transactions that are EIP-155 compliant for major chains. |

Instead of a mnemonic, you can alternatively provide a private key or array of
private keys as the first parameter. When providing an array, `addressIndex`
and `numberOfAddresses` are fully supported.

```javascript
const HDWalletProvider = require("hdwalletprovider");
//load single private key as string
let provider = new HDWalletProvider("3f841bf589fdf83a521e55d51afddc34fa65351161eead24f064855fc29c9580");

// Or, pass an array of private keys, and optionally use a certain subset of addresses
const privateKeys = ["3f841bf589fdf83a521e55d51afddc34fa65351161eead24f064855fc29c9580", "9549f39decea7b7504e15572b2c6a72766df0281cea22bd1a3bc87166b1ca290"];
provider = new HDWalletProvider(privateKeys, "http://localhost:8545", 0, 2); //start at address_index 0 and load both addresses
```
